<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libvisual: lv_video.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">libvisual
   &#160;<span id="projectnumber">0.5.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">lv_video.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="lv__video_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Libvisual - The audio visualisation framework.</span>
<a name="l00002"></a>00002 <span class="comment"> *</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright (C) 2004, 2005, 2006 Dennis Smit &lt;ds@nerds-incorporated.org&gt;</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Authors: Dennis Smit &lt;ds@nerds-incorporated.org&gt;</span>
<a name="l00006"></a>00006 <span class="comment"> *      Duilio J. Protti &lt;dprotti@users.sourceforge.net&gt;</span>
<a name="l00007"></a>00007 <span class="comment"> *      Chong Kai Xiong &lt;kaixiong@codeleft.sg&gt;</span>
<a name="l00008"></a>00008 <span class="comment"> *      Jean-Christophe Hoelt &lt;jeko@ios-software.com&gt;</span>
<a name="l00009"></a>00009 <span class="comment"> *      Jaak Randmets &lt;jaak.ra@gmail.com&gt;</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * $Id: lv_video.c,v 1.86.2.1 2006/03/04 12:32:47 descender Exp $</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00014"></a>00014 <span class="comment"> * it under the terms of the GNU Lesser General Public License as</span>
<a name="l00015"></a>00015 <span class="comment"> * published by the Free Software Foundation; either version 2.1</span>
<a name="l00016"></a>00016 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00019"></a>00019 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00020"></a>00020 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00021"></a>00021 <span class="comment"> * GNU Lesser General Public License for more details.</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> * You should have received a copy of the GNU Lesser General Public License</span>
<a name="l00024"></a>00024 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00025"></a>00025 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
<a name="l00026"></a>00026 <span class="comment"> */</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;config.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="lv__video_8h.html">lv_video.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="lv__color_8h.html">lv_color.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="lv__common_8h.html">lv_common.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="lv__cpu_8h.html">lv_cpu.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="lv__video__convert_8h.html">private/lv_video_convert.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="lv__video__fill_8h.html">private/lv_video_fill.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="lv__video__scale_8h.html">private/lv_video_scale.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="lv__video__blit_8h.html">private/lv_video_blit.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;gettext.h&quot;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#pragma pack(1)</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00042"></a>00042 <span class="preprocessor">#ifdef VISUAL_LITTLE_ENDIAN</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>    uint16_t b:5, g:6, r:5;
<a name="l00044"></a>00044 <span class="preprocessor">#else</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>    uint16_t r:5, g:6, b:5;
<a name="l00046"></a>00046 <span class="preprocessor">#endif</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>} <a class="code" href="structrgb16__t.html">rgb16_t</a>;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#pragma pack()</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 <span class="comment">/* The VisVideo dtor function */</span>
<a name="l00052"></a>00052 <span class="keyword">static</span> <span class="keywordtype">int</span> video_dtor (<a class="code" href="struct__VisObject.html" title="The VisObject structure contains all the VisObject housekeeping data like refcounting and a pointer t...">VisObject</a> *<span class="keywordtype">object</span>);
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">/* Precomputation functions */</span>
<a name="l00055"></a>00055 <span class="keyword">static</span> <span class="keywordtype">void</span> precompute_row_table (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video);
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="comment">/* Rotate functions */</span>
<a name="l00058"></a>00058 <span class="keyword">static</span> <span class="keywordtype">int</span> rotate_90 (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src);
<a name="l00059"></a>00059 <span class="keyword">static</span> <span class="keywordtype">int</span> rotate_180 (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src);
<a name="l00060"></a>00060 <span class="keyword">static</span> <span class="keywordtype">int</span> rotate_270 (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src);
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="comment">/* Mirror functions */</span>
<a name="l00063"></a>00063 <span class="keyword">static</span> <span class="keywordtype">int</span> mirror_x (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src);
<a name="l00064"></a>00064 <span class="keyword">static</span> <span class="keywordtype">int</span> mirror_y (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src);
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="keyword">static</span> <span class="keywordtype">int</span> video_dtor (<a class="code" href="struct__VisObject.html" title="The VisObject structure contains all the VisObject housekeeping data like refcounting and a pointer t...">VisObject</a> *<span class="keywordtype">object</span>)
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video = <a class="code" href="group__VisVideo.html#ga7dd6c076072d7bfe3f5aa67a86ea927a">VISUAL_VIDEO</a> (<span class="keywordtype">object</span>);
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <a class="code" href="group__VisColor.html#ga6e0f0e2558d543b4b2f44e800c5f55ac">visual_color_free</a> (video-&gt;<a class="code" href="struct__VisVideo.html#a7e4b4ccc0f49c2d0b89169c51a0354d8" title="The surface it&#39;s alpha colorkey.">colorkey</a>);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (video-&gt;<a class="code" href="struct__VisVideo.html#a0d497388f8bba92684e58edd68b0125a" title="The rectangle over the parent surface.">rect</a>);
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="keywordflow">if</span> (video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00075"></a>00075         <a class="code" href="group__VisMem.html#gad28e0c8516ddcb841d40b77259c78ed4" title="Frees allocated memory.">visual_mem_free</a> (video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>);
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <span class="keywordflow">if</span> (video-&gt;<a class="code" href="struct__VisVideo.html#a62dc7dc63e5fc6732fc8333e89090731" title="The surface it&#39;s parent, ONLY when it is a subregion.">parent</a> != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00078"></a>00078         <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (video-&gt;<a class="code" href="struct__VisVideo.html#a62dc7dc63e5fc6732fc8333e89090731" title="The surface it&#39;s parent, ONLY when it is a subregion.">parent</a>));
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="keywordflow">if</span> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a> != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00081"></a>00081         <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>));
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00084"></a>00084     video-&gt;<a class="code" href="struct__VisVideo.html#a62dc7dc63e5fc6732fc8333e89090731" title="The surface it&#39;s parent, ONLY when it is a subregion.">parent</a> = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00085"></a>00085     video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a> = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 
<a name="l00091"></a><a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a">00091</a> <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *<a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ()
<a name="l00092"></a>00092 {
<a name="l00093"></a>00093     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     video = <a class="code" href="group__VisMem.html#gacc3a119d795b22d441e0c9189ccc3eee" title="Convenient macro to request n_structs structures of type struct_type initialized to 0...">visual_mem_new0</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a>, 1);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <a class="code" href="group__VisVideo.html#gafeeb5b529a7afb875788bc30bce2301d" title="Initializes a VisVideo, this will set the allocated flag for the object to FALSE.">visual_video_init</a> (video);
<a name="l00098"></a>00098 
<a name="l00099"></a>00099     <span class="comment">/* Do the VisObject initialization */</span>
<a name="l00100"></a>00100     <a class="code" href="group__VisObject.html#gaae00a3546bb578b98c8ffbd5d189c55d" title="Sets whether a VisObject is allocated or not.">visual_object_set_allocated</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (video), <a class="code" href="lv__defines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l00101"></a>00101     <a class="code" href="group__VisObject.html#ga5da2f29c9d01864d6f2a42f8f0771d42" title="Increases the reference counter for a VisObject.">visual_object_ref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (video));
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <span class="keywordflow">return</span> video;
<a name="l00104"></a>00104 }
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="group__VisVideo.html#gafeeb5b529a7afb875788bc30bce2301d">00106</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gafeeb5b529a7afb875788bc30bce2301d" title="Initializes a VisVideo, this will set the allocated flag for the object to FALSE.">visual_video_init</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video)
<a name="l00107"></a>00107 {
<a name="l00108"></a>00108     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <span class="comment">/* Do the VisObject initialization */</span>
<a name="l00111"></a>00111     <a class="code" href="group__VisObject.html#gabd5edf81d6b96ee64d3e5a270163e0d3" title="Clears a VisObject.">visual_object_clear</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (video));
<a name="l00112"></a>00112     <a class="code" href="group__VisObject.html#ga07271127d7d996c7b75fe4e652e0fa81" title="Sets the destructor function to a VisObject.">visual_object_set_dtor</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (video), video_dtor);
<a name="l00113"></a>00113     <a class="code" href="group__VisObject.html#gaae00a3546bb578b98c8ffbd5d189c55d" title="Sets whether a VisObject is allocated or not.">visual_object_set_allocated</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (video), <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">/* Reset the VisVideo data */</span>
<a name="l00116"></a>00116     video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a> = <a class="code" href="group__VisBuffer.html#gac7cf63b0eafc5f06048e3cdb39a9b2f2" title="Creates a new VisBuffer.">visual_buffer_new</a> ();
<a name="l00117"></a>00117 
<a name="l00118"></a>00118     video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120     <a class="code" href="group__VisVideo.html#ga7bd71a3e78d54fd17c8e9d77c4ab3c19" title="Sets all attributes for a VisVideo.">visual_video_set_attributes</a> (video, 0, 0, 0, <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca4d40fb17423de83f2005b0db5da5a6bd" title="No video surface flag.">VISUAL_VIDEO_DEPTH_NONE</a>);
<a name="l00121"></a>00121     <a class="code" href="group__VisVideo.html#gaa77bba9ceed2b652b0507e1e7d7d6ea2" title="Sets a buffer to a VisVideo.">visual_video_set_buffer</a> (video, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00122"></a>00122     <a class="code" href="group__VisVideo.html#ga9e937d0d82e61c43fd0144ad080151cb" title="Sets a palette to a VisVideo.">visual_video_set_palette</a> (video, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00123"></a>00123 
<a name="l00124"></a>00124     video-&gt;<a class="code" href="struct__VisVideo.html#a62dc7dc63e5fc6732fc8333e89090731" title="The surface it&#39;s parent, ONLY when it is a subregion.">parent</a> = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00125"></a>00125     video-&gt;<a class="code" href="struct__VisVideo.html#a0d497388f8bba92684e58edd68b0125a" title="The rectangle over the parent surface.">rect</a> = <a class="code" href="group__VisRectangle.html#ga77669675ee2028dfd96baadb2ed09e36">visual_rectangle_new_empty</a> ();
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     <span class="comment">/* Composite control */</span>
<a name="l00128"></a>00128     video-&gt;<a class="code" href="struct__VisVideo.html#ad3b2f41f3dccde604be2b36a141853f4" title="The surface it&#39;s composite type.">compositetype</a> = <a class="code" href="group__VisVideo.html#gga0dddec914051dd748985fad365d9b026a1b47f8d04939ee4cd195af0101b8f1ab" title="Source alpha channel.">VISUAL_VIDEO_COMPOSITE_TYPE_SRC</a>;
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     <span class="comment">/* Colors */</span>
<a name="l00131"></a>00131     video-&gt;<a class="code" href="struct__VisVideo.html#a7e4b4ccc0f49c2d0b89169c51a0354d8" title="The surface it&#39;s alpha colorkey.">colorkey</a> = <a class="code" href="group__VisColor.html#gaf82a2bd02b6c65588e23f14774ffc392">visual_color_new</a> ();
<a name="l00132"></a>00132 
<a name="l00133"></a>00133     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="group__VisVideo.html#ga334b47917488c4d5bf50c01f7ec0078a">00136</a> <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *<a class="code" href="group__VisVideo.html#ga334b47917488c4d5bf50c01f7ec0078a" title="Creates a new VisVideo and also allocates a buffer.">visual_video_new_with_buffer</a> (<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth)
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video;
<a name="l00139"></a>00139     <span class="keywordtype">int</span> ret;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     video = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l00142"></a>00142 
<a name="l00143"></a>00143     <a class="code" href="group__VisVideo.html#ga843336f680cd6714571f9b9e06d40449" title="Sets the depth for a VisVideo.">visual_video_set_depth</a> (video, depth);
<a name="l00144"></a>00144     <a class="code" href="group__VisVideo.html#gab483fa7ca87cea384cf890286f35d8c5" title="Sets the dimension for a VisVideo.">visual_video_set_dimension</a> (video, width, height);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     ret = <a class="code" href="group__VisVideo.html#gaefb8348e556887774f1119473379954b" title="Allocates a buffer for the VisVideo.">visual_video_allocate_buffer</a> (video);
<a name="l00147"></a>00147 
<a name="l00148"></a>00148     <span class="keywordflow">if</span> (ret &lt; 0) {
<a name="l00149"></a>00149         <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (video));
<a name="l00150"></a>00150 
<a name="l00151"></a>00151         <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00152"></a>00152     }
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <span class="keywordflow">return</span> video;
<a name="l00155"></a>00155 }
<a name="l00156"></a>00156 
<a name="l00157"></a><a class="code" href="group__VisVideo.html#ga4c7a55906bb0dbbff97119db57c86cfb">00157</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga4c7a55906bb0dbbff97119db57c86cfb" title="Frees the buffer that relates to the VisVideo.">visual_video_free_buffer</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video)
<a name="l00158"></a>00158 {
<a name="l00159"></a>00159     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00160"></a>00160     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (<a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (video) != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55baeb0971410dc2216ea803cfc3e11acbf2" title="The VisVideo doesn&#39;t point to a pixel buffer.">VISUAL_ERROR_VIDEO_PIXELS_NULL</a>);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     <span class="keywordflow">if</span> (video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00163"></a>00163         <a class="code" href="group__VisMem.html#gad28e0c8516ddcb841d40b77259c78ed4" title="Frees allocated memory.">visual_mem_free</a> (video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165     <span class="keywordflow">if</span> (<a class="code" href="group__VisBuffer.html#ga636bc3fc3dd18a2321c457993252b661" title="Return if the internal buffer is flagged as allocated or not.">visual_buffer_get_allocated</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>)) {
<a name="l00166"></a>00166 
<a name="l00167"></a>00167         <a class="code" href="group__VisBuffer.html#gac8d3d9789e8fe31a95b3c1e483ae2843" title="Destroys the content of a VisBuffer using the VisBufferDestroyerFunc that is set to the VisBuffer...">visual_buffer_destroy_content</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     } <span class="keywordflow">else</span> {
<a name="l00170"></a>00170         <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba34cf932e919004d8566b79801281674f" title="The VisVideo doesn&#39;t have an allocated pixel buffer.">VISUAL_ERROR_VIDEO_NO_ALLOCATED</a>;
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00174"></a>00174     <a class="code" href="group__VisBuffer.html#gacc899d0ba4847076c2c1a27fbf493645" title="Sets the data pair (data and it&#39;s size) to a VisBuffer.">visual_buffer_set_data_pair</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00177"></a>00177 }
<a name="l00178"></a>00178 
<a name="l00179"></a><a class="code" href="group__VisVideo.html#gaefb8348e556887774f1119473379954b">00179</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gaefb8348e556887774f1119473379954b" title="Allocates a buffer for the VisVideo.">visual_video_allocate_buffer</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video)
<a name="l00180"></a>00180 {
<a name="l00181"></a>00181     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00182"></a>00182     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a> != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba7b989edcf0b7af7699016b3c9b5c5319" title="The VisVideo has no VisBuffer object.">VISUAL_ERROR_VIDEO_BUFFER_NULL</a>);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184     <span class="keywordflow">if</span> (<a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (video) != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00185"></a>00185         <span class="keywordflow">if</span> (<a class="code" href="group__VisBuffer.html#ga636bc3fc3dd18a2321c457993252b661" title="Return if the internal buffer is flagged as allocated or not.">visual_buffer_get_allocated</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>)) {
<a name="l00186"></a>00186             <a class="code" href="group__VisVideo.html#ga4c7a55906bb0dbbff97119db57c86cfb" title="Frees the buffer that relates to the VisVideo.">visual_video_free_buffer</a> (video);
<a name="l00187"></a>00187         } <span class="keywordflow">else</span> {
<a name="l00188"></a>00188             <a class="code" href="group__VisLog.html#ga6cb2aa41edb99cc803a3893601f2362c" title="Used for log messages, this is brought under a define so that the __FILE__ and __LINE__ macros (and p...">visual_log</a> (<a class="code" href="group__VisLog.html#gga9fed3305ac1acb555bc97dc26f350e3ba8bf23a2943c56c20c179bb1d75d862c2" title="Error message, use to notify the user of fatals.">VISUAL_LOG_ERROR</a>, _(<span class="stringliteral">&quot;Trying to allocate an screen buffer on &quot;</span>
<a name="l00189"></a>00189                     <span class="stringliteral">&quot;a VisVideo structure which points to an external screen buffer&quot;</span>));
<a name="l00190"></a>00190 
<a name="l00191"></a>00191             <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba08a46fcab07f44e81bf878a2840271d7" title="The VisVideo already points to a pixel buffer.">VISUAL_ERROR_VIDEO_HAS_PIXELS</a>;
<a name="l00192"></a>00192         }
<a name="l00193"></a>00193     }
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     <span class="keywordflow">if</span> (<a class="code" href="group__VisVideo.html#gadb455e900d8eed8dde53c045f5eeb518">visual_video_get_size</a> (video) == 0) {
<a name="l00196"></a>00196         <a class="code" href="group__VisBuffer.html#ga1cf90f90457c6681915740466b9f9b0f" title="Sets the data to a VisBuffer.">visual_buffer_set_data</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00197"></a>00197 
<a name="l00198"></a>00198         <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     <a class="code" href="group__VisBuffer.html#ga576e031c53d761315d9677067334948b" title="Sets the destroyer function for the content of a VisBuffer.">visual_buffer_set_destroyer</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>, <a class="code" href="group__VisBuffer.html#gad1afb15843b14ffcfa67f6ef28c23183" title="A standard destroyer that can be set on VisBuffers.">visual_buffer_destroyer_free</a>);
<a name="l00202"></a>00202     <a class="code" href="group__VisBuffer.html#ga3537f94a2a9ac7983afb81d5935470cf" title="Sets the size of the data to a VisBuffer.">visual_buffer_set_size</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>, <a class="code" href="group__VisVideo.html#gadb455e900d8eed8dde53c045f5eeb518">visual_video_get_size</a> (video));
<a name="l00203"></a>00203     <a class="code" href="group__VisBuffer.html#gada5119d53ee75cc9d7aedc1656b670d6" title="Allocates the data for a VisBuffer, the amount of bytes allocated is defined by the data size that is...">visual_buffer_allocate_data</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>);
<a name="l00204"></a>00204 
<a name="l00205"></a>00205     video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> = <a class="code" href="group__VisMem.html#gacc3a119d795b22d441e0c9189ccc3eee" title="Convenient macro to request n_structs structures of type struct_type initialized to 0...">visual_mem_new0</a> (<span class="keywordtype">void</span> *, video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>);
<a name="l00206"></a>00206     precompute_row_table (video);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00209"></a>00209 }
<a name="l00210"></a>00210 
<a name="l00211"></a><a class="code" href="group__VisVideo.html#gacc13e8adc32aec753147a0f6bec00aa8">00211</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gacc13e8adc32aec753147a0f6bec00aa8" title="Checks if the given VisVideo has a private allocated buffer.">visual_video_have_allocated_buffer</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video)
<a name="l00212"></a>00212 {
<a name="l00213"></a>00213     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
<a name="l00214"></a>00214 
<a name="l00215"></a>00215     <span class="keywordflow">return</span> <a class="code" href="group__VisBuffer.html#ga636bc3fc3dd18a2321c457993252b661" title="Return if the internal buffer is flagged as allocated or not.">visual_buffer_get_allocated</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>);
<a name="l00216"></a>00216 }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218 <span class="keyword">static</span> <span class="keywordtype">void</span> precompute_row_table (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video)
<a name="l00219"></a>00219 {
<a name="l00220"></a>00220     uint8_t **table, *row;
<a name="l00221"></a>00221     <span class="keywordtype">int</span> y;
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     <a class="code" href="lv__checks_8h.html#a2a00268a7d0b3c9329a1d85c3cca4e70" title="Return if expr is FALSE, showing a critical message with useful information.">visual_return_if_fail</a> (video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     table = (uint8_t **) video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>;
<a name="l00226"></a>00226     row = (uint8_t *) <a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (video);
<a name="l00227"></a>00227 
<a name="l00228"></a>00228     <span class="keywordflow">for</span> (y = 0; y &lt; video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>; y++, row += video-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a>)
<a name="l00229"></a>00229         *table++ = row;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a><a class="code" href="group__VisVideo.html#ga91d7132bd7fa89fc668fba5f89f42b74">00232</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga91d7132bd7fa89fc668fba5f89f42b74" title="Clones the information from a VisVideo to another.">visual_video_clone</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l00233"></a>00233 {
<a name="l00234"></a>00234     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00235"></a>00235     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00236"></a>00236 
<a name="l00237"></a>00237     <a class="code" href="group__VisVideo.html#ga843336f680cd6714571f9b9e06d40449" title="Sets the depth for a VisVideo.">visual_video_set_depth</a> (dest, src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>);
<a name="l00238"></a>00238     <a class="code" href="group__VisVideo.html#gab483fa7ca87cea384cf890286f35d8c5" title="Sets the dimension for a VisVideo.">visual_video_set_dimension</a> (dest, src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>, src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>);
<a name="l00239"></a>00239     <a class="code" href="group__VisVideo.html#gaa1a8afd785a9e3591826011aa11e30ba" title="Sets the pitch for a VisVideo.">visual_video_set_pitch</a> (dest, src-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a>);
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a><a class="code" href="group__VisVideo.html#gaf7cff6a8d7e1d91a16e894e58b67dc73">00244</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gaf7cff6a8d7e1d91a16e894e58b67dc73" title="Checks if two VisVideo objects are the same depth, pitch and dimension wise.">visual_video_compare</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src1, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src2)
<a name="l00245"></a>00245 {
<a name="l00246"></a>00246     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src1 != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00247"></a>00247     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src2 != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     <span class="keywordflow">if</span> (!<a class="code" href="group__VisVideo.html#gae2e338f2ca7198f6f2929c831c8fc72d" title="Checks if two VisVideo objects are the same depth and dimension wise.">visual_video_compare_ignore_pitch</a> (src1, src2))
<a name="l00250"></a>00250         <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00251"></a>00251 
<a name="l00252"></a>00252     <span class="keywordflow">if</span> (src1-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> != src2-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a>)
<a name="l00253"></a>00253         <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     <span class="comment">/* We made it to the end, the VisVideos are likewise in depth, pitch, dimensions */</span>
<a name="l00256"></a>00256     <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00257"></a>00257 }
<a name="l00258"></a>00258 
<a name="l00259"></a><a class="code" href="group__VisVideo.html#gae2e338f2ca7198f6f2929c831c8fc72d">00259</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gae2e338f2ca7198f6f2929c831c8fc72d" title="Checks if two VisVideo objects are the same depth and dimension wise.">visual_video_compare_ignore_pitch</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src1, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src2)
<a name="l00260"></a>00260 {
<a name="l00261"></a>00261     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src1 != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00262"></a>00262     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src2 != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00263"></a>00263 
<a name="l00264"></a>00264     <span class="keywordflow">if</span> (src1-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> != src2-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>)
<a name="l00265"></a>00265         <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267     <span class="keywordflow">if</span> (src1-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> != src2-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>)
<a name="l00268"></a>00268         <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00269"></a>00269 
<a name="l00270"></a>00270     <span class="keywordflow">if</span> (src1-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a> != src2-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>)
<a name="l00271"></a>00271         <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00272"></a>00272 
<a name="l00273"></a>00273     <span class="comment">/* We made it to the end, the VisVideos are likewise in depth, pitch, dimensions */</span>
<a name="l00274"></a>00274     <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00277"></a><a class="code" href="group__VisVideo.html#ga9e937d0d82e61c43fd0144ad080151cb">00277</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga9e937d0d82e61c43fd0144ad080151cb" title="Sets a palette to a VisVideo.">visual_video_set_palette</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <a class="code" href="group__VisPalette.html#gac2585e3f0a455ed8b09ef3a331cd558b">VisPalette</a> *pal)
<a name="l00278"></a>00278 {
<a name="l00279"></a>00279     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     <span class="keywordflow">if</span> (video-&gt;<a class="code" href="struct__VisVideo.html#a41ac3e7d09a28262a2acb8cbf2809a29" title="Optional pointer to the palette.">pal</a>) {
<a name="l00282"></a>00282         <a class="code" href="group__VisPalette.html#ga3f12fa05345a0999bc4cb7773edad605">visual_palette_free</a> (video-&gt;<a class="code" href="struct__VisVideo.html#a41ac3e7d09a28262a2acb8cbf2809a29" title="Optional pointer to the palette.">pal</a>);
<a name="l00283"></a>00283     }
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     video-&gt;<a class="code" href="struct__VisVideo.html#a41ac3e7d09a28262a2acb8cbf2809a29" title="Optional pointer to the palette.">pal</a> = pal ? <a class="code" href="group__VisPalette.html#gac93e53fa9a1ac3c173ac26566c8b7c4b">visual_palette_clone</a> (pal) : <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00286"></a>00286 
<a name="l00287"></a>00287     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00290"></a><a class="code" href="group__VisVideo.html#gaa77bba9ceed2b652b0507e1e7d7d6ea2">00290</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gaa77bba9ceed2b652b0507e1e7d7d6ea2" title="Sets a buffer to a VisVideo.">visual_video_set_buffer</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <span class="keywordtype">void</span> *buffer)
<a name="l00291"></a>00291 {
<a name="l00292"></a>00292     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00293"></a>00293 
<a name="l00294"></a>00294     <span class="keywordflow">if</span> (<a class="code" href="group__VisBuffer.html#ga636bc3fc3dd18a2321c457993252b661" title="Return if the internal buffer is flagged as allocated or not.">visual_buffer_get_allocated</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>)) {
<a name="l00295"></a>00295         <a class="code" href="group__VisLog.html#ga6cb2aa41edb99cc803a3893601f2362c" title="Used for log messages, this is brought under a define so that the __FILE__ and __LINE__ macros (and p...">visual_log</a> (<a class="code" href="group__VisLog.html#gga9fed3305ac1acb555bc97dc26f350e3ba8bf23a2943c56c20c179bb1d75d862c2" title="Error message, use to notify the user of fatals.">VISUAL_LOG_ERROR</a>, _(<span class="stringliteral">&quot;Trying to set a screen buffer on &quot;</span>
<a name="l00296"></a>00296                 <span class="stringliteral">&quot;a VisVideo structure which points to an allocated screen buffer&quot;</span>));
<a name="l00297"></a>00297 
<a name="l00298"></a>00298         <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba603863b1f5728e562de17c46e589aa69" title="The VisVideo has an allocated buffer.">VISUAL_ERROR_VIDEO_HAS_ALLOCATED</a>;
<a name="l00299"></a>00299     }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301     <a class="code" href="group__VisBuffer.html#ga1cf90f90457c6681915740466b9f9b0f" title="Sets the data to a VisBuffer.">visual_buffer_set_data</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>, buffer);
<a name="l00302"></a>00302     <a class="code" href="group__VisBuffer.html#ga576e031c53d761315d9677067334948b" title="Sets the destroyer function for the content of a VisBuffer.">visual_buffer_set_destroyer</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00303"></a>00303 
<a name="l00304"></a>00304     <span class="keywordflow">if</span> (video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00305"></a>00305         <a class="code" href="group__VisMem.html#gad28e0c8516ddcb841d40b77259c78ed4" title="Frees allocated memory.">visual_mem_free</a> (video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>);
<a name="l00306"></a>00306 
<a name="l00307"></a>00307         video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <span class="keywordflow">if</span> (<a class="code" href="group__VisBuffer.html#ga653325b932f38e6d3274042fbd5a36dd" title="Gets pointer to the data that is encapsulated by the VisBuffer.">visual_buffer_get_data</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>) != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00311"></a>00311         video-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a> = <a class="code" href="group__VisMem.html#gacc3a119d795b22d441e0c9189ccc3eee" title="Convenient macro to request n_structs structures of type struct_type initialized to 0...">visual_mem_new0</a> (<span class="keywordtype">void</span> *, video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313         precompute_row_table (video);
<a name="l00314"></a>00314     }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00317"></a>00317 }
<a name="l00318"></a>00318 
<a name="l00319"></a><a class="code" href="group__VisVideo.html#gab483fa7ca87cea384cf890286f35d8c5">00319</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gab483fa7ca87cea384cf890286f35d8c5" title="Sets the dimension for a VisVideo.">visual_video_set_dimension</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l00320"></a>00320 {
<a name="l00321"></a>00321     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00322"></a>00322 
<a name="l00323"></a>00323     video-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> = width;
<a name="l00324"></a>00324     video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a> = height;
<a name="l00325"></a>00325 
<a name="l00326"></a>00326     video-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> = video-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> * video-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>;
<a name="l00327"></a>00327 
<a name="l00328"></a>00328     <a class="code" href="group__VisBuffer.html#ga3537f94a2a9ac7983afb81d5935470cf" title="Sets the size of the data to a VisBuffer.">visual_buffer_set_size</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>, video-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> * video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>);
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00331"></a>00331 }
<a name="l00332"></a>00332 
<a name="l00333"></a><a class="code" href="group__VisVideo.html#gaa1a8afd785a9e3591826011aa11e30ba">00333</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gaa1a8afd785a9e3591826011aa11e30ba" title="Sets the pitch for a VisVideo.">visual_video_set_pitch</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <span class="keywordtype">int</span> pitch)
<a name="l00334"></a>00334 {
<a name="l00335"></a>00335     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00336"></a>00336     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (pitch &gt; 0, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba2a8bb4d72274ad47172209f93f989d0f" title="The VisVideo has an invalid pitch.">VISUAL_ERROR_VIDEO_INVALID_PITCH</a>);
<a name="l00337"></a>00337 
<a name="l00338"></a>00338     <span class="keywordflow">if</span> (video-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a> &lt;= 0)
<a name="l00339"></a>00339         <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba6ac517adfc4f5e12022ccdb834edd98f" title="The VisVideo it&#39;s bytes per pixel is invalid.">VISUAL_ERROR_VIDEO_INVALID_BPP</a>;
<a name="l00340"></a>00340 
<a name="l00341"></a>00341     video-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> = pitch;
<a name="l00342"></a>00342     <a class="code" href="group__VisBuffer.html#ga3537f94a2a9ac7983afb81d5935470cf" title="Sets the size of the data to a VisBuffer.">visual_buffer_set_size</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>, video-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> * video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>);
<a name="l00343"></a>00343 
<a name="l00344"></a>00344     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00345"></a>00345 }
<a name="l00346"></a>00346 
<a name="l00347"></a><a class="code" href="group__VisVideo.html#ga843336f680cd6714571f9b9e06d40449">00347</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga843336f680cd6714571f9b9e06d40449" title="Sets the depth for a VisVideo.">visual_video_set_depth</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth)
<a name="l00348"></a>00348 {
<a name="l00349"></a>00349     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00350"></a>00350 
<a name="l00351"></a>00351     video-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> = depth;
<a name="l00352"></a>00352     video-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a> = <a class="code" href="group__VisVideo.html#ga59d10f8180b1d610aa92263136984d98" title="Returns the number of bytes per pixel from the VisVideoDepth enumerate.">visual_video_bpp_from_depth</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>);
<a name="l00353"></a>00353 
<a name="l00354"></a>00354     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00355"></a>00355 }
<a name="l00356"></a>00356 
<a name="l00357"></a><a class="code" href="group__VisVideo.html#ga7bd71a3e78d54fd17c8e9d77c4ab3c19">00357</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga7bd71a3e78d54fd17c8e9d77c4ab3c19" title="Sets all attributes for a VisVideo.">visual_video_set_attributes</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keywordtype">int</span> pitch, <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth)
<a name="l00358"></a>00358 {
<a name="l00359"></a>00359     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00360"></a>00360 
<a name="l00361"></a>00361     <a class="code" href="group__VisVideo.html#ga843336f680cd6714571f9b9e06d40449" title="Sets the depth for a VisVideo.">visual_video_set_depth</a> (video, depth);
<a name="l00362"></a>00362     <a class="code" href="group__VisVideo.html#gab483fa7ca87cea384cf890286f35d8c5" title="Sets the dimension for a VisVideo.">visual_video_set_dimension</a> (video, width, height);
<a name="l00363"></a>00363     <a class="code" href="group__VisVideo.html#gaa1a8afd785a9e3591826011aa11e30ba" title="Sets the pitch for a VisVideo.">visual_video_set_pitch</a> (video, pitch);
<a name="l00364"></a>00364 
<a name="l00365"></a>00365     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00366"></a>00366 }
<a name="l00367"></a>00367 
<a name="l00368"></a><a class="code" href="group__VisVideo.html#gadb455e900d8eed8dde53c045f5eeb518">00368</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gadb455e900d8eed8dde53c045f5eeb518">visual_video_get_size</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video)
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <span class="keywordflow">return</span> video-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> * video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>;
<a name="l00373"></a>00373 }
<a name="l00374"></a>00374 
<a name="l00375"></a><a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e">00375</a> <span class="keywordtype">void</span> *<a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video)
<a name="l00376"></a>00376 {
<a name="l00377"></a>00377     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00378"></a>00378 
<a name="l00379"></a>00379     <span class="keywordflow">return</span> <a class="code" href="group__VisBuffer.html#ga653325b932f38e6d3274042fbd5a36dd" title="Gets pointer to the data that is encapsulated by the VisBuffer.">visual_buffer_get_data</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>);
<a name="l00380"></a>00380 }
<a name="l00381"></a>00381 
<a name="l00382"></a><a class="code" href="group__VisVideo.html#gaa2d7d6d9aa5204abac67033001473525">00382</a> <a class="code" href="struct__VisBuffer.html" title="The VisBuffer data structure holding a buffer and information regarding the buffer.">VisBuffer</a> *<a class="code" href="group__VisVideo.html#gaa2d7d6d9aa5204abac67033001473525" title="Retrieves the VisBuffer object from a VisVideo.">visual_video_get_buffer</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video)
<a name="l00383"></a>00383 {
<a name="l00384"></a>00384     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00385"></a>00385 
<a name="l00386"></a>00386     <span class="keywordflow">return</span> video-&gt;<a class="code" href="struct__VisVideo.html#aff9ab5a44c3b8fba93530c86c26394a8" title="The video buffer.">buffer</a>;
<a name="l00387"></a>00387 }
<a name="l00388"></a>00388 
<a name="l00389"></a><a class="code" href="group__VisVideo.html#ga4302a1d0c248420483ae24851970e044">00389</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga4302a1d0c248420483ae24851970e044" title="Checks if a certain depth is supported by checking against an ORred depthflag.">visual_video_depth_is_supported</a> (<span class="keywordtype">int</span> depthflag, <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth)
<a name="l00390"></a>00390 {
<a name="l00391"></a>00391     <span class="keywordflow">if</span> (<a class="code" href="group__VisVideo.html#gac3fd3fab80a96d608a882da2d4c0dbf0" title="Checks if a certain value is a sane depth.">visual_video_depth_is_sane</a> (depth) == 0)
<a name="l00392"></a>00392         <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>;
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     <span class="keywordflow">if</span> ((depth &amp; depthflag) &gt; 0)
<a name="l00395"></a>00395         <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00396"></a>00396 
<a name="l00397"></a>00397     <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00398"></a>00398 }
<a name="l00399"></a>00399 
<a name="l00400"></a><a class="code" href="group__VisVideo.html#gae66dc79a668af1148752a8d172076ded">00400</a> <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> <a class="code" href="group__VisVideo.html#gae66dc79a668af1148752a8d172076ded" title="Get the next depth from the ORred depthflag.">visual_video_depth_get_next</a> (<span class="keywordtype">int</span> depthflag, <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth)
<a name="l00401"></a>00401 {
<a name="l00402"></a>00402     <span class="keywordtype">int</span> i = depth;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <span class="keywordflow">if</span> (<a class="code" href="group__VisVideo.html#gac3fd3fab80a96d608a882da2d4c0dbf0" title="Checks if a certain value is a sane depth.">visual_video_depth_is_sane</a> (depth) == 0)
<a name="l00405"></a>00405         <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca5a92d0cee1ede97f958f7577c2a365d7" title="Used when there is an error.">VISUAL_VIDEO_DEPTH_ERROR</a>;
<a name="l00406"></a>00406 
<a name="l00407"></a>00407     <span class="keywordflow">if</span> (i == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca4d40fb17423de83f2005b0db5da5a6bd" title="No video surface flag.">VISUAL_VIDEO_DEPTH_NONE</a>) {
<a name="l00408"></a>00408         i = <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>;
<a name="l00409"></a>00409 
<a name="l00410"></a>00410         <span class="keywordflow">if</span> ((i &amp; depthflag) &gt; 0)
<a name="l00411"></a>00411             <span class="keywordflow">return</span> i;
<a name="l00412"></a>00412     }
<a name="l00413"></a>00413 
<a name="l00414"></a>00414     <span class="keywordflow">while</span> (i &lt; <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614caf0d4ce0057f2e910d8d1cc76feab5428" title="openGL surface flag.">VISUAL_VIDEO_DEPTH_GL</a>) {
<a name="l00415"></a>00415         i *= 2;
<a name="l00416"></a>00416 
<a name="l00417"></a>00417         <span class="keywordflow">if</span> ((i &amp; depthflag) &gt; 0)
<a name="l00418"></a>00418             <span class="keywordflow">return</span> i;
<a name="l00419"></a>00419     }
<a name="l00420"></a>00420 
<a name="l00421"></a>00421     <span class="keywordflow">return</span> depth;
<a name="l00422"></a>00422 }
<a name="l00423"></a>00423 
<a name="l00424"></a><a class="code" href="group__VisVideo.html#gaf5efdc1cf7029a06b7762632b4fdef6e">00424</a> <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> <a class="code" href="group__VisVideo.html#gaf5efdc1cf7029a06b7762632b4fdef6e" title="Get the previous depth from the ORred depthflag.">visual_video_depth_get_prev</a> (<span class="keywordtype">int</span> depthflag, <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth)
<a name="l00425"></a>00425 {
<a name="l00426"></a>00426     <span class="keywordtype">int</span> i = depth;
<a name="l00427"></a>00427 
<a name="l00428"></a>00428     <span class="keywordflow">if</span> (<a class="code" href="group__VisVideo.html#gac3fd3fab80a96d608a882da2d4c0dbf0" title="Checks if a certain value is a sane depth.">visual_video_depth_is_sane</a> (depth) == 0)
<a name="l00429"></a>00429         <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca5a92d0cee1ede97f958f7577c2a365d7" title="Used when there is an error.">VISUAL_VIDEO_DEPTH_ERROR</a>;
<a name="l00430"></a>00430 
<a name="l00431"></a>00431     <span class="keywordflow">if</span> (i == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca4d40fb17423de83f2005b0db5da5a6bd" title="No video surface flag.">VISUAL_VIDEO_DEPTH_NONE</a>)
<a name="l00432"></a>00432         <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca4d40fb17423de83f2005b0db5da5a6bd" title="No video surface flag.">VISUAL_VIDEO_DEPTH_NONE</a>;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434     <span class="keywordflow">while</span> (i &gt; <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca4d40fb17423de83f2005b0db5da5a6bd" title="No video surface flag.">VISUAL_VIDEO_DEPTH_NONE</a>) {
<a name="l00435"></a>00435         i &gt;&gt;= 1;
<a name="l00436"></a>00436 
<a name="l00437"></a>00437         <span class="keywordflow">if</span> ((i &amp; depthflag) &gt; 0)
<a name="l00438"></a>00438             <span class="keywordflow">return</span> i;
<a name="l00439"></a>00439     }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441     <span class="keywordflow">return</span> depth;
<a name="l00442"></a>00442 }
<a name="l00443"></a>00443 
<a name="l00444"></a><a class="code" href="group__VisVideo.html#ga4eaac35ce6c55baf8845bcac779868c0">00444</a> <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> <a class="code" href="group__VisVideo.html#ga4eaac35ce6c55baf8845bcac779868c0" title="Return the lowest supported graphical depth from the ORred depthflag.">visual_video_depth_get_lowest</a> (<span class="keywordtype">int</span> depthflag)
<a name="l00445"></a>00445 {
<a name="l00446"></a>00446     <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gae66dc79a668af1148752a8d172076ded" title="Get the next depth from the ORred depthflag.">visual_video_depth_get_next</a> (depthflag, <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca4d40fb17423de83f2005b0db5da5a6bd" title="No video surface flag.">VISUAL_VIDEO_DEPTH_NONE</a>);
<a name="l00447"></a>00447 }
<a name="l00448"></a>00448 
<a name="l00449"></a><a class="code" href="group__VisVideo.html#ga6f4be3c83c289352f3e928142b1f7bf7">00449</a> <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> <a class="code" href="group__VisVideo.html#ga6f4be3c83c289352f3e928142b1f7bf7" title="Return the highest supported graphical depth from the ORred depthflag.">visual_video_depth_get_highest</a> (<span class="keywordtype">int</span> depthflag)
<a name="l00450"></a>00450 {
<a name="l00451"></a>00451     <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> highest = <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca4d40fb17423de83f2005b0db5da5a6bd" title="No video surface flag.">VISUAL_VIDEO_DEPTH_NONE</a>;
<a name="l00452"></a>00452     <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> i = 0;
<a name="l00453"></a>00453     <span class="keywordtype">int</span> firstentry = <a class="code" href="lv__defines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455     <span class="keywordflow">while</span> (highest != i || firstentry) {
<a name="l00456"></a>00456         highest = i;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458         i = <a class="code" href="group__VisVideo.html#gae66dc79a668af1148752a8d172076ded" title="Get the next depth from the ORred depthflag.">visual_video_depth_get_next</a> (depthflag, i);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460         firstentry = <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00461"></a>00461     }
<a name="l00462"></a>00462 
<a name="l00463"></a>00463     <span class="keywordflow">return</span> highest;
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00466"></a><a class="code" href="group__VisVideo.html#ga41b289796f2ff23af4c9bd7803000856">00466</a> <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> <a class="code" href="group__VisVideo.html#ga41b289796f2ff23af4c9bd7803000856" title="Return the highest supported depth that is NOT openGL.">visual_video_depth_get_highest_nogl</a> (<span class="keywordtype">int</span> depthflag)
<a name="l00467"></a>00467 {
<a name="l00468"></a>00468     <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth;
<a name="l00469"></a>00469 
<a name="l00470"></a>00470     depth = <a class="code" href="group__VisVideo.html#ga6f4be3c83c289352f3e928142b1f7bf7" title="Return the highest supported graphical depth from the ORred depthflag.">visual_video_depth_get_highest</a> (depthflag);
<a name="l00471"></a>00471 
<a name="l00472"></a>00472     <span class="comment">/* Get previous depth if the highest is openGL */</span>
<a name="l00473"></a>00473     <span class="keywordflow">if</span> (depth == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614caf0d4ce0057f2e910d8d1cc76feab5428" title="openGL surface flag.">VISUAL_VIDEO_DEPTH_GL</a>) {
<a name="l00474"></a>00474         depth = <a class="code" href="group__VisVideo.html#gaf5efdc1cf7029a06b7762632b4fdef6e" title="Get the previous depth from the ORred depthflag.">visual_video_depth_get_prev</a> (depthflag, depth);
<a name="l00475"></a>00475 
<a name="l00476"></a>00476         <span class="comment">/* Is it still on openGL ? Return an error */</span>
<a name="l00477"></a>00477         <span class="keywordflow">if</span> (depth == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614caf0d4ce0057f2e910d8d1cc76feab5428" title="openGL surface flag.">VISUAL_VIDEO_DEPTH_GL</a>)
<a name="l00478"></a>00478             <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca5a92d0cee1ede97f958f7577c2a365d7" title="Used when there is an error.">VISUAL_VIDEO_DEPTH_ERROR</a>;
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     } <span class="keywordflow">else</span> {
<a name="l00481"></a>00481         <span class="keywordflow">return</span> depth;
<a name="l00482"></a>00482     }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484     <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8f4228439a6155fecc257ce44504a5e3" title="The impossible happened, this should never happen.">VISUAL_ERROR_IMPOSSIBLE</a>;
<a name="l00485"></a>00485 }
<a name="l00486"></a>00486 
<a name="l00487"></a><a class="code" href="group__VisVideo.html#gac3fd3fab80a96d608a882da2d4c0dbf0">00487</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gac3fd3fab80a96d608a882da2d4c0dbf0" title="Checks if a certain value is a sane depth.">visual_video_depth_is_sane</a> (<a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth)
<a name="l00488"></a>00488 {
<a name="l00489"></a>00489     <span class="keywordtype">int</span> count = 0;
<a name="l00490"></a>00490     <span class="keywordtype">int</span> i = 1;
<a name="l00491"></a>00491 
<a name="l00492"></a>00492     <span class="keywordflow">if</span> (depth == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca4d40fb17423de83f2005b0db5da5a6bd" title="No video surface flag.">VISUAL_VIDEO_DEPTH_NONE</a>)
<a name="l00493"></a>00493         <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     <span class="keywordflow">if</span> (depth &gt;= <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca3e874c7102c0269c7c1b7379100638e0" title="Used to mark the end of the depth list.">VISUAL_VIDEO_DEPTH_ENDLIST</a>)
<a name="l00496"></a>00496         <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     <span class="keywordflow">while</span> (i &lt; <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca3e874c7102c0269c7c1b7379100638e0" title="Used to mark the end of the depth list.">VISUAL_VIDEO_DEPTH_ENDLIST</a>) {
<a name="l00499"></a>00499         <span class="keywordflow">if</span> ((i &amp; depth) &gt; 0)
<a name="l00500"></a>00500             count++;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502         <span class="keywordflow">if</span> (count &gt; 1)
<a name="l00503"></a>00503             <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00504"></a>00504 
<a name="l00505"></a>00505         i &lt;&lt;= 1;
<a name="l00506"></a>00506     }
<a name="l00507"></a>00507 
<a name="l00508"></a>00508     <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00509"></a>00509 }
<a name="l00510"></a>00510 
<a name="l00511"></a><a class="code" href="group__VisVideo.html#gab4bd1c5c835d915f98e01672cc6f1d78">00511</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gab4bd1c5c835d915f98e01672cc6f1d78" title="Returns the number of bits per pixel from a VisVideoDepth enumerate value.">visual_video_depth_value_from_enum</a> (<a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth)
<a name="l00512"></a>00512 {
<a name="l00513"></a>00513     <span class="keywordflow">switch</span> (depth) {
<a name="l00514"></a>00514         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>:
<a name="l00515"></a>00515             <span class="keywordflow">return</span> 8;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>:
<a name="l00518"></a>00518             <span class="keywordflow">return</span> 16;
<a name="l00519"></a>00519 
<a name="l00520"></a>00520         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>:
<a name="l00521"></a>00521             <span class="keywordflow">return</span> 24;
<a name="l00522"></a>00522 
<a name="l00523"></a>00523         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>:
<a name="l00524"></a>00524             <span class="keywordflow">return</span> 32;
<a name="l00525"></a>00525 
<a name="l00526"></a>00526         <span class="keywordflow">default</span>:
<a name="l00527"></a>00527             <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>;
<a name="l00528"></a>00528     }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530     <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>;
<a name="l00531"></a>00531 }
<a name="l00532"></a>00532 
<a name="l00533"></a><a class="code" href="group__VisVideo.html#ga451137cd50a5172775bb873cec719f87">00533</a> <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> <a class="code" href="group__VisVideo.html#ga451137cd50a5172775bb873cec719f87" title="Returns a VisVideoDepth enumerate value from bits per pixel.">visual_video_depth_enum_from_value</a> (<span class="keywordtype">int</span> depthvalue)
<a name="l00534"></a>00534 {
<a name="l00535"></a>00535     <span class="keywordflow">switch</span> (depthvalue) {
<a name="l00536"></a>00536         <span class="keywordflow">case</span> 8:
<a name="l00537"></a>00537             <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>;
<a name="l00538"></a>00538 
<a name="l00539"></a>00539         <span class="keywordflow">case</span> 16:
<a name="l00540"></a>00540             <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>;
<a name="l00541"></a>00541 
<a name="l00542"></a>00542         <span class="keywordflow">case</span> 24:
<a name="l00543"></a>00543             <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>;
<a name="l00544"></a>00544 
<a name="l00545"></a>00545         <span class="keywordflow">case</span> 32:
<a name="l00546"></a>00546             <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>;
<a name="l00547"></a>00547 
<a name="l00548"></a>00548         <span class="keywordflow">default</span>:
<a name="l00549"></a>00549             <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca5a92d0cee1ede97f958f7577c2a365d7" title="Used when there is an error.">VISUAL_VIDEO_DEPTH_ERROR</a>;
<a name="l00550"></a>00550 
<a name="l00551"></a>00551     }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553     <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8f4228439a6155fecc257ce44504a5e3" title="The impossible happened, this should never happen.">VISUAL_ERROR_IMPOSSIBLE</a>;
<a name="l00554"></a>00554 }
<a name="l00555"></a>00555 
<a name="l00556"></a><a class="code" href="group__VisVideo.html#ga59d10f8180b1d610aa92263136984d98">00556</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga59d10f8180b1d610aa92263136984d98" title="Returns the number of bytes per pixel from the VisVideoDepth enumerate.">visual_video_bpp_from_depth</a> (<a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth)
<a name="l00557"></a>00557 {
<a name="l00558"></a>00558     <span class="keywordflow">switch</span> (depth) {
<a name="l00559"></a>00559         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>:
<a name="l00560"></a>00560             <span class="keywordflow">return</span> 1;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>:
<a name="l00563"></a>00563             <span class="keywordflow">return</span> 2;
<a name="l00564"></a>00564 
<a name="l00565"></a>00565         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>:
<a name="l00566"></a>00566             <span class="keywordflow">return</span> 3;
<a name="l00567"></a>00567 
<a name="l00568"></a>00568         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>:
<a name="l00569"></a>00569             <span class="keywordflow">return</span> 4;
<a name="l00570"></a>00570 
<a name="l00571"></a>00571         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614caf0d4ce0057f2e910d8d1cc76feab5428" title="openGL surface flag.">VISUAL_VIDEO_DEPTH_GL</a>:
<a name="l00572"></a>00572             <span class="keywordflow">return</span> 0;
<a name="l00573"></a>00573 
<a name="l00574"></a>00574         <span class="keywordflow">default</span>:
<a name="l00575"></a>00575             <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>;
<a name="l00576"></a>00576     }
<a name="l00577"></a>00577 
<a name="l00578"></a>00578     <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8f4228439a6155fecc257ce44504a5e3" title="The impossible happened, this should never happen.">VISUAL_ERROR_IMPOSSIBLE</a>;
<a name="l00579"></a>00579 }
<a name="l00580"></a>00580 
<a name="l00581"></a><a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5">00581</a> <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *<a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video)
<a name="l00582"></a>00582 {
<a name="l00583"></a>00583     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00584"></a>00584 
<a name="l00585"></a>00585     <span class="keywordflow">return</span> <a class="code" href="group__VisRectangle.html#ga405b754eb9d94bbe5260c026ad2d8268">visual_rectangle_new</a> (0, 0, video-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>, video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>);
<a name="l00586"></a>00586 }
<a name="l00587"></a>00587 
<a name="l00588"></a><a class="code" href="group__VisVideo.html#ga61f3984d3cf8a4957908b1ca0765fda9">00588</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga61f3984d3cf8a4957908b1ca0765fda9" title="Creates a sub region of a VisVideo.">visual_video_region_sub</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *rect)
<a name="l00589"></a>00589 {
<a name="l00590"></a>00590     <span class="keywordtype">int</span> error = <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00591"></a>00591     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *vrect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00592"></a>00592     <span class="keywordtype">int</span> rect_x, rect_y, rect_width, rect_height;
<a name="l00593"></a>00593 
<a name="l00594"></a>00594     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00595"></a>00595     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00596"></a>00596     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (rect != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba481166dab6072a27b23a0561e283ef7d" title="The VisRectangle is NULL.">VISUAL_ERROR_RECTANGLE_NULL</a>);
<a name="l00597"></a>00597 
<a name="l00598"></a>00598     <span class="comment">/* FIXME make non verbose */</span>
<a name="l00599"></a>00599     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (!<a class="code" href="group__VisRectangle.html#gaa7c58613fb225d245807fb7d7edf545b">visual_rectangle_is_empty</a> (rect), -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>);
<a name="l00600"></a>00600 
<a name="l00601"></a>00601     vrect = <a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (src);
<a name="l00602"></a>00602 
<a name="l00603"></a>00603     <span class="keywordflow">if</span> (!<a class="code" href="group__VisRectangle.html#gab5082cf32c2d082a0d02ca9cbf947fad">visual_rectangle_contains_rect</a> (vrect, rect)) {
<a name="l00604"></a>00604         error = -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>;
<a name="l00605"></a>00605         <span class="keywordflow">goto</span> out;
<a name="l00606"></a>00606     }
<a name="l00607"></a>00607 
<a name="l00608"></a>00608     <a class="code" href="group__VisRectangle.html#ga28e3b9f5314acef488914e71774b6fc7">visual_rectangle_copy</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#a0d497388f8bba92684e58edd68b0125a" title="The rectangle over the parent surface.">rect</a>, rect);
<a name="l00609"></a>00609     <a class="code" href="group__VisObject.html#ga5da2f29c9d01864d6f2a42f8f0771d42" title="Increases the reference counter for a VisObject.">visual_object_ref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (src));
<a name="l00610"></a>00610 
<a name="l00611"></a>00611     dest-&gt;<a class="code" href="struct__VisVideo.html#a62dc7dc63e5fc6732fc8333e89090731" title="The surface it&#39;s parent, ONLY when it is a subregion.">parent</a> = src;
<a name="l00612"></a>00612 
<a name="l00613"></a>00613     rect_x      = <a class="code" href="group__VisRectangle.html#ga8f4fcfe2e4839d2368da0fa7d4f80131">visual_rectangle_get_x</a> (rect);
<a name="l00614"></a>00614     rect_y      = <a class="code" href="group__VisRectangle.html#ga42fc0bad09ab6bcfbc8fdd5b6ddf01e1">visual_rectangle_get_y</a> (rect);
<a name="l00615"></a>00615     rect_width  = <a class="code" href="group__VisRectangle.html#gaccc4568decac329dfbc065ece6a4fdec">visual_rectangle_get_width</a>  (rect);
<a name="l00616"></a>00616     rect_height = <a class="code" href="group__VisRectangle.html#ga2b187f396db29b9095a3cc19e197b1b0">visual_rectangle_get_height</a> (rect);
<a name="l00617"></a>00617 
<a name="l00618"></a>00618     <a class="code" href="group__VisVideo.html#ga7bd71a3e78d54fd17c8e9d77c4ab3c19" title="Sets all attributes for a VisVideo.">visual_video_set_attributes</a> (dest, rect_width, rect_height,
<a name="l00619"></a>00619             (rect_width * src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>) + (src-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> - (rect_width * src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>)), src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>);
<a name="l00620"></a>00620     <a class="code" href="group__VisVideo.html#gaa77bba9ceed2b652b0507e1e7d7d6ea2" title="Sets a buffer to a VisVideo.">visual_video_set_buffer</a> (dest, (uint8_t *) (<a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (src)) + ((rect_y * src-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a>) + (rect_x * src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>)));
<a name="l00621"></a>00621 
<a name="l00622"></a>00622     <span class="comment">/* Copy composite */</span>
<a name="l00623"></a>00623     dest-&gt;<a class="code" href="struct__VisVideo.html#ad3b2f41f3dccde604be2b36a141853f4" title="The surface it&#39;s composite type.">compositetype</a> = src-&gt;<a class="code" href="struct__VisVideo.html#ad3b2f41f3dccde604be2b36a141853f4" title="The surface it&#39;s composite type.">compositetype</a>;
<a name="l00624"></a>00624     dest-&gt;<a class="code" href="struct__VisVideo.html#a12b9fddd1389ad064a789cd2dd0fd84c" title="The surface it&#39;s custom composite function.">compfunc</a> = src-&gt;<a class="code" href="struct__VisVideo.html#a12b9fddd1389ad064a789cd2dd0fd84c" title="The surface it&#39;s custom composite function.">compfunc</a>;
<a name="l00625"></a>00625     <a class="code" href="group__VisColor.html#gab57d1fa5fb3506ac9876c58e31792c8d">visual_color_copy</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#a7e4b4ccc0f49c2d0b89169c51a0354d8" title="The surface it&#39;s alpha colorkey.">colorkey</a>, src-&gt;<a class="code" href="struct__VisVideo.html#a7e4b4ccc0f49c2d0b89169c51a0354d8" title="The surface it&#39;s alpha colorkey.">colorkey</a>);
<a name="l00626"></a>00626     dest-&gt;<a class="code" href="struct__VisVideo.html#a9fc10fabb959b14737ce5956e3263782" title="The surface it&#39;s global alpha density.">density</a> = src-&gt;<a class="code" href="struct__VisVideo.html#a9fc10fabb959b14737ce5956e3263782" title="The surface it&#39;s global alpha density.">density</a>;
<a name="l00627"></a>00627 
<a name="l00628"></a>00628     <a class="code" href="group__VisVideo.html#ga9e937d0d82e61c43fd0144ad080151cb" title="Sets a palette to a VisVideo.">visual_video_set_palette</a> (dest, src-&gt;<a class="code" href="struct__VisVideo.html#a41ac3e7d09a28262a2acb8cbf2809a29" title="Optional pointer to the palette.">pal</a>);
<a name="l00629"></a>00629 
<a name="l00630"></a>00630 out:
<a name="l00631"></a>00631     <span class="keywordflow">if</span> (vrect) <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (vrect);
<a name="l00632"></a>00632 
<a name="l00633"></a>00633     <span class="keywordflow">return</span> error;
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00636"></a><a class="code" href="group__VisVideo.html#ga67238d695ffff9d92cdc11797c3bac5f">00636</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga67238d695ffff9d92cdc11797c3bac5f" title="Creates a sub region of a VisVideo likewise visual_video_region_sub() however the position and dimens...">visual_video_region_sub_by_values</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l00637"></a>00637 {
<a name="l00638"></a>00638     <span class="keywordtype">int</span> error = <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00639"></a>00639     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *rect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00642"></a>00642     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00643"></a>00643 
<a name="l00644"></a>00644     rect = <a class="code" href="group__VisRectangle.html#ga405b754eb9d94bbe5260c026ad2d8268">visual_rectangle_new</a> (x, y, width, height);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     error = <a class="code" href="group__VisVideo.html#ga61f3984d3cf8a4957908b1ca0765fda9" title="Creates a sub region of a VisVideo.">visual_video_region_sub</a> (dest, src, rect);
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (rect);
<a name="l00649"></a>00649 
<a name="l00650"></a>00650     <span class="keywordflow">return</span> error;
<a name="l00651"></a>00651 }
<a name="l00652"></a>00652 
<a name="l00653"></a><a class="code" href="group__VisVideo.html#gae86b7d181db4e347ef02e6f661f134f6">00653</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gae86b7d181db4e347ef02e6f661f134f6">visual_video_region_sub_all</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l00654"></a>00654 {
<a name="l00655"></a>00655     <span class="keywordtype">int</span> error = <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00656"></a>00656     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *rect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00657"></a>00657 
<a name="l00658"></a>00658     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00659"></a>00659     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00660"></a>00660 
<a name="l00661"></a>00661     rect = <a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (dest);
<a name="l00662"></a>00662 
<a name="l00663"></a>00663     error = <a class="code" href="group__VisVideo.html#ga61f3984d3cf8a4957908b1ca0765fda9" title="Creates a sub region of a VisVideo.">visual_video_region_sub</a> (dest, src, rect);
<a name="l00664"></a>00664 
<a name="l00665"></a>00665     <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (rect);
<a name="l00666"></a>00666 
<a name="l00667"></a>00667     <span class="keywordflow">return</span> error;
<a name="l00668"></a>00668 }
<a name="l00669"></a>00669 
<a name="l00670"></a><a class="code" href="group__VisVideo.html#ga80916a75034ab65cbcdf1ba135edf97f">00670</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga80916a75034ab65cbcdf1ba135edf97f">visual_video_region_sub_with_boundary</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *drect, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *srect)
<a name="l00671"></a>00671 {
<a name="l00672"></a>00672     <span class="keywordtype">int</span> error;
<a name="l00673"></a>00673     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *rsrect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00674"></a>00674     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *sbound = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00675"></a>00675 
<a name="l00676"></a>00676     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00677"></a>00677     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00678"></a>00678     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (drect != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba481166dab6072a27b23a0561e283ef7d" title="The VisRectangle is NULL.">VISUAL_ERROR_RECTANGLE_NULL</a>);
<a name="l00679"></a>00679     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (srect != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba481166dab6072a27b23a0561e283ef7d" title="The VisRectangle is NULL.">VISUAL_ERROR_RECTANGLE_NULL</a>);
<a name="l00680"></a>00680 
<a name="l00681"></a>00681     rsrect = <a class="code" href="group__VisRectangle.html#ga310b751ced832bebd42949321e057cf4">visual_rectangle_clone</a> (srect);
<a name="l00682"></a>00682     sbound = <a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (src);
<a name="l00683"></a>00683 
<a name="l00684"></a>00684     <span class="comment">/* Merge the destination and source rect, so that only the allowed parts are sub regioned */</span>
<a name="l00685"></a>00685     <a class="code" href="group__VisRectangle.html#ga6b0578229d8cb548cb3c575a62db4aaa">visual_rectangle_clip</a> (rsrect, sbound, srect);
<a name="l00686"></a>00686     <a class="code" href="group__VisRectangle.html#ga6b0578229d8cb548cb3c575a62db4aaa">visual_rectangle_clip</a> (rsrect, drect, rsrect);
<a name="l00687"></a>00687 
<a name="l00688"></a>00688     error = <a class="code" href="group__VisVideo.html#ga61f3984d3cf8a4957908b1ca0765fda9" title="Creates a sub region of a VisVideo.">visual_video_region_sub</a> (dest, src, rsrect);
<a name="l00689"></a>00689 
<a name="l00690"></a>00690     <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (sbound);
<a name="l00691"></a>00691     <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (rsrect);
<a name="l00692"></a>00692 
<a name="l00693"></a>00693     <span class="keywordflow">return</span> error;
<a name="l00694"></a>00694 }
<a name="l00695"></a>00695 
<a name="l00696"></a><a class="code" href="group__VisVideo.html#ga1bb2caaa9df7c067bc461ac1d72c97bf">00696</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga1bb2caaa9df7c067bc461ac1d72c97bf">visual_video_composite_set_type</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <a class="code" href="group__VisVideo.html#ga0dddec914051dd748985fad365d9b026" title="Enumerate that defines the different blitting methods for a VisVideo.">VisVideoCompositeType</a> type)
<a name="l00697"></a>00697 {
<a name="l00698"></a>00698     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00699"></a>00699 
<a name="l00700"></a>00700     video-&gt;<a class="code" href="struct__VisVideo.html#ad3b2f41f3dccde604be2b36a141853f4" title="The surface it&#39;s composite type.">compositetype</a> = type;
<a name="l00701"></a>00701 
<a name="l00702"></a>00702     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00703"></a>00703 }
<a name="l00704"></a>00704 
<a name="l00705"></a><a class="code" href="group__VisVideo.html#ga2de8a7a840af357905941bf712e3f193">00705</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga2de8a7a840af357905941bf712e3f193">visual_video_composite_set_colorkey</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <a class="code" href="group__VisColor.html#ga97b8da0933a45b795491a2479671b726">VisColor</a> *color)
<a name="l00706"></a>00706 {
<a name="l00707"></a>00707     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00708"></a>00708 
<a name="l00709"></a>00709     <span class="keywordflow">if</span> (color != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00710"></a>00710         <a class="code" href="group__VisColor.html#gab57d1fa5fb3506ac9876c58e31792c8d">visual_color_copy</a> (video-&gt;<a class="code" href="struct__VisVideo.html#a7e4b4ccc0f49c2d0b89169c51a0354d8" title="The surface it&#39;s alpha colorkey.">colorkey</a>, color);
<a name="l00711"></a>00711     <span class="keywordflow">else</span>
<a name="l00712"></a>00712         <a class="code" href="group__VisColor.html#gac889b7f6ef756c50a0463aacc6700efd">visual_color_set</a> (video-&gt;<a class="code" href="struct__VisVideo.html#a7e4b4ccc0f49c2d0b89169c51a0354d8" title="The surface it&#39;s alpha colorkey.">colorkey</a>, 0, 0, 0);
<a name="l00713"></a>00713 
<a name="l00714"></a>00714     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00715"></a>00715 }
<a name="l00716"></a>00716 
<a name="l00717"></a><a class="code" href="group__VisVideo.html#gaa6fe79a179dc060396e78356bfa41f37">00717</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gaa6fe79a179dc060396e78356bfa41f37">visual_video_composite_set_surface</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, uint8_t alpha)
<a name="l00718"></a>00718 {
<a name="l00719"></a>00719     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00720"></a>00720 
<a name="l00721"></a>00721     video-&gt;<a class="code" href="struct__VisVideo.html#a9fc10fabb959b14737ce5956e3263782" title="The surface it&#39;s global alpha density.">density</a> = alpha;
<a name="l00722"></a>00722 
<a name="l00723"></a>00723     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00724"></a>00724 }
<a name="l00725"></a>00725 
<a name="l00726"></a><a class="code" href="group__VisVideo.html#gabf40b0c1474958895b72944549106f6f">00726</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gabf40b0c1474958895b72944549106f6f">visual_video_composite_set_function</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <a class="code" href="group__VisVideo.html#gaf8f77558989c132a78a62394f2ef7ff1" title="A custom composite function needs this signature.">VisVideoCustomCompositeFunc</a> compfunc)
<a name="l00727"></a>00727 {
<a name="l00728"></a>00728     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00729"></a>00729 
<a name="l00730"></a>00730     video-&gt;<a class="code" href="struct__VisVideo.html#a12b9fddd1389ad064a789cd2dd0fd84c" title="The surface it&#39;s custom composite function.">compfunc</a> = compfunc;
<a name="l00731"></a>00731 
<a name="l00732"></a>00732     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00733"></a>00733 }
<a name="l00734"></a>00734 
<a name="l00735"></a><a class="code" href="group__VisVideo.html#ga88d9b64b8ceba3abe70307ffe5a98555">00735</a> <a class="code" href="group__VisVideo.html#gaf8f77558989c132a78a62394f2ef7ff1" title="A custom composite function needs this signature.">VisVideoCustomCompositeFunc</a> <a class="code" href="group__VisVideo.html#ga88d9b64b8ceba3abe70307ffe5a98555">visual_video_composite_get_function</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <span class="keywordtype">int</span> alpha)
<a name="l00736"></a>00736 {
<a name="l00737"></a>00737     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00738"></a>00738     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00739"></a>00739 
<a name="l00740"></a>00740     <span class="keywordflow">switch</span> (src-&gt;<a class="code" href="struct__VisVideo.html#ad3b2f41f3dccde604be2b36a141853f4" title="The surface it&#39;s composite type.">compositetype</a>) {
<a name="l00741"></a>00741         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga0dddec914051dd748985fad365d9b026ad9f3bb384021ef147aa9b899588e6b79" title="No composite set, use default.">VISUAL_VIDEO_COMPOSITE_TYPE_NONE</a>:
<a name="l00742"></a>00742             <span class="keywordflow">return</span> <a class="code" href="lv__video__blit_8c.html#a270c506426494d51a559b9a608b4ce46">blit_overlay_noalpha</a>;
<a name="l00743"></a>00743 
<a name="l00744"></a>00744         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga0dddec914051dd748985fad365d9b026a1b47f8d04939ee4cd195af0101b8f1ab" title="Source alpha channel.">VISUAL_VIDEO_COMPOSITE_TYPE_SRC</a>:
<a name="l00745"></a>00745             <span class="keywordflow">if</span> (!alpha || src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> != <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>)
<a name="l00746"></a>00746                 <span class="keywordflow">return</span> <a class="code" href="lv__video__blit_8c.html#a270c506426494d51a559b9a608b4ce46">blit_overlay_noalpha</a>;
<a name="l00747"></a>00747             <span class="keywordflow">else</span>
<a name="l00748"></a>00748                 <span class="keywordflow">return</span> <a class="code" href="lv__video__blit_8c.html#a2e0acdc67d384a09e1612fb17eca0133">blit_overlay_alphasrc</a>;
<a name="l00749"></a>00749 
<a name="l00750"></a>00750         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga0dddec914051dd748985fad365d9b026a9c374a9259e8d0da6813245b00cd92a7" title="Colorkey alpha.">VISUAL_VIDEO_COMPOSITE_TYPE_COLORKEY</a>:
<a name="l00751"></a>00751             <span class="keywordflow">return</span> <a class="code" href="lv__video__blit_8c.html#a9bde13a1e15160dde30ae9ef1da19e6c">blit_overlay_colorkey</a>;
<a name="l00752"></a>00752 
<a name="l00753"></a>00753         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga0dddec914051dd748985fad365d9b026a9370f66ccf299ca3540c6b845cd3a8b2" title="One alpha channel for the complete surface.">VISUAL_VIDEO_COMPOSITE_TYPE_SURFACE</a>:
<a name="l00754"></a>00754             <span class="keywordflow">return</span> <a class="code" href="lv__video__blit_8c.html#a7cbedde083642f7ec2ef1b1330408352">blit_overlay_surfacealpha</a>;
<a name="l00755"></a>00755 
<a name="l00756"></a>00756         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga0dddec914051dd748985fad365d9b026a296c406de0cdc0be1b994db8d7209536" title="Use surface alpha on colorkey.">VISUAL_VIDEO_COMPOSITE_TYPE_SURFACECOLORKEY</a>:
<a name="l00757"></a>00757             <span class="keywordflow">return</span> <a class="code" href="lv__video__blit_8c.html#a11b26cbe132f2c8974f1ef06021cb7f0">blit_overlay_surfacealphacolorkey</a>;
<a name="l00758"></a>00758 
<a name="l00759"></a>00759         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga0dddec914051dd748985fad365d9b026ae2ba7420f46f1867df1a07dd770371ac" title="Custom composite function (looks up on the source VisVideo.">VISUAL_VIDEO_COMPOSITE_TYPE_CUSTOM</a>:
<a name="l00760"></a>00760             <span class="keywordflow">return</span> src-&gt;<a class="code" href="struct__VisVideo.html#a12b9fddd1389ad064a789cd2dd0fd84c" title="The surface it&#39;s custom composite function.">compfunc</a>;
<a name="l00761"></a>00761 
<a name="l00762"></a>00762         <span class="keywordflow">default</span>:
<a name="l00763"></a>00763             <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00764"></a>00764     }
<a name="l00765"></a>00765 }
<a name="l00766"></a>00766 
<a name="l00767"></a><a class="code" href="group__VisVideo.html#ga7f0b894719628231e442c46b5e78b97d">00767</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga7f0b894719628231e442c46b5e78b97d">visual_video_blit_overlay_rectangle</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *drect, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *srect, <span class="keywordtype">int</span> alpha)
<a name="l00768"></a>00768 {
<a name="l00769"></a>00769     <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#ga5d021227ef88d4e58c27c0809575eb4a">visual_video_blit_overlay_rectangle_custom</a> (dest, drect, src, srect,
<a name="l00770"></a>00770             <a class="code" href="group__VisVideo.html#ga88d9b64b8ceba3abe70307ffe5a98555">visual_video_composite_get_function</a> (dest, src, alpha));
<a name="l00771"></a>00771 }
<a name="l00772"></a>00772 
<a name="l00773"></a><a class="code" href="group__VisVideo.html#ga5d021227ef88d4e58c27c0809575eb4a">00773</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga5d021227ef88d4e58c27c0809575eb4a">visual_video_blit_overlay_rectangle_custom</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *drect, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *srect,
<a name="l00774"></a>00774                         <a class="code" href="group__VisVideo.html#gaf8f77558989c132a78a62394f2ef7ff1" title="A custom composite function needs this signature.">VisVideoCustomCompositeFunc</a> compfunc)
<a name="l00775"></a>00775 {
<a name="l00776"></a>00776     <span class="keywordtype">int</span> error = <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00777"></a>00777     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *vsrc = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00778"></a>00778     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *ndrect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00779"></a>00779 
<a name="l00780"></a>00780     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00781"></a>00781     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00782"></a>00782     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (drect != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba481166dab6072a27b23a0561e283ef7d" title="The VisRectangle is NULL.">VISUAL_ERROR_RECTANGLE_NULL</a>);
<a name="l00783"></a>00783     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (srect != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba481166dab6072a27b23a0561e283ef7d" title="The VisRectangle is NULL.">VISUAL_ERROR_RECTANGLE_NULL</a>);
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     vsrc = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l00786"></a>00786 
<a name="l00787"></a>00787     ndrect = <a class="code" href="group__VisRectangle.html#ga310b751ced832bebd42949321e057cf4">visual_rectangle_clone</a> (drect);
<a name="l00788"></a>00788     <a class="code" href="group__VisRectangle.html#gae3fd5b3863d66d5178d979fa78ebac35">visual_rectangle_normalize_to</a> (ndrect, srect);
<a name="l00789"></a>00789 
<a name="l00790"></a>00790     <span class="keywordflow">if</span> ((error = <a class="code" href="group__VisVideo.html#ga80916a75034ab65cbcdf1ba135edf97f">visual_video_region_sub_with_boundary</a> (vsrc, ndrect, src, srect)) != <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>)
<a name="l00791"></a>00791         <span class="keywordflow">goto</span> out;
<a name="l00792"></a>00792 
<a name="l00793"></a>00793     error = <a class="code" href="group__VisVideo.html#ga169d27a229fcd69da5a734118cb9b410">visual_video_blit_overlay_custom</a> (dest, vsrc,
<a name="l00794"></a>00794                                               <a class="code" href="group__VisRectangle.html#ga8f4fcfe2e4839d2368da0fa7d4f80131">visual_rectangle_get_x</a> (drect),
<a name="l00795"></a>00795                                               <a class="code" href="group__VisRectangle.html#ga42fc0bad09ab6bcfbc8fdd5b6ddf01e1">visual_rectangle_get_y</a> (drect),
<a name="l00796"></a>00796                                               compfunc);
<a name="l00797"></a>00797 
<a name="l00798"></a>00798 out:
<a name="l00799"></a>00799     <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (ndrect);
<a name="l00800"></a>00800     <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (vsrc));
<a name="l00801"></a>00801 
<a name="l00802"></a>00802     <span class="keywordflow">return</span> error;
<a name="l00803"></a>00803 }
<a name="l00804"></a>00804 
<a name="l00805"></a><a class="code" href="group__VisVideo.html#ga4d49337a8b32a97ac1d7adb7e01b242d">00805</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga4d49337a8b32a97ac1d7adb7e01b242d">visual_video_blit_overlay_rectangle_scale</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *drect, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *srect,
<a name="l00806"></a>00806         <span class="keywordtype">int</span> alpha, <a class="code" href="group__VisVideo.html#gac960c0b0e39022b51dd97d840e3c1173" title="Enumerate that defines the different methods of scaling within VisVideo.">VisVideoScaleMethod</a> scale_method)
<a name="l00807"></a>00807 {
<a name="l00808"></a>00808     <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#ga497832d9528fd4cf33721d8575abd590">visual_video_blit_overlay_rectangle_scale_custom</a> (dest, drect, src, srect, scale_method,
<a name="l00809"></a>00809             <a class="code" href="group__VisVideo.html#ga88d9b64b8ceba3abe70307ffe5a98555">visual_video_composite_get_function</a> (dest, src, alpha));
<a name="l00810"></a>00810 }
<a name="l00811"></a>00811 
<a name="l00812"></a><a class="code" href="group__VisVideo.html#ga497832d9528fd4cf33721d8575abd590">00812</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga497832d9528fd4cf33721d8575abd590">visual_video_blit_overlay_rectangle_scale_custom</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *drect, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *srect,
<a name="l00813"></a>00813                         <a class="code" href="group__VisVideo.html#gac960c0b0e39022b51dd97d840e3c1173" title="Enumerate that defines the different methods of scaling within VisVideo.">VisVideoScaleMethod</a> scale_method, <a class="code" href="group__VisVideo.html#gaf8f77558989c132a78a62394f2ef7ff1" title="A custom composite function needs this signature.">VisVideoCustomCompositeFunc</a> compfunc)
<a name="l00814"></a>00814 {
<a name="l00815"></a>00815     <span class="keywordtype">int</span> error = <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00816"></a>00816 
<a name="l00817"></a>00817     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *svid = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00818"></a>00818     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *ssrc = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00819"></a>00819     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *frect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00820"></a>00820     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *sbound = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00821"></a>00821 
<a name="l00822"></a>00822     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00823"></a>00823     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00824"></a>00824     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (drect != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba481166dab6072a27b23a0561e283ef7d" title="The VisRectangle is NULL.">VISUAL_ERROR_RECTANGLE_NULL</a>);
<a name="l00825"></a>00825     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (srect != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba481166dab6072a27b23a0561e283ef7d" title="The VisRectangle is NULL.">VISUAL_ERROR_RECTANGLE_NULL</a>);
<a name="l00826"></a>00826 
<a name="l00827"></a>00827     svid = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l00828"></a>00828     ssrc = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l00829"></a>00829 
<a name="l00830"></a>00830     sbound = <a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (dest);
<a name="l00831"></a>00831 
<a name="l00832"></a>00832     <span class="comment">/* check if the rectangle is in the screen, if not, don&#39;t scale and such */</span>
<a name="l00833"></a>00833     <span class="keywordflow">if</span> (!<a class="code" href="group__VisRectangle.html#ga22460a08ef7a9c1ddce375bd28e51795">visual_rectangle_intersects</a> (sbound, drect)) {
<a name="l00834"></a>00834         <span class="comment">/* FIXME: set error here */</span>
<a name="l00835"></a>00835         <span class="keywordflow">goto</span> out;
<a name="l00836"></a>00836     }
<a name="l00837"></a>00837 
<a name="l00838"></a>00838     <a class="code" href="group__VisVideo.html#ga61f3984d3cf8a4957908b1ca0765fda9" title="Creates a sub region of a VisVideo.">visual_video_region_sub</a> (ssrc, src, srect);
<a name="l00839"></a>00839 
<a name="l00840"></a>00840     <a class="code" href="group__VisVideo.html#ga7bd71a3e78d54fd17c8e9d77c4ab3c19" title="Sets all attributes for a VisVideo.">visual_video_set_attributes</a> (svid,
<a name="l00841"></a>00841                                  <a class="code" href="group__VisRectangle.html#gaccc4568decac329dfbc065ece6a4fdec">visual_rectangle_get_width</a> (drect),
<a name="l00842"></a>00842                                  <a class="code" href="group__VisRectangle.html#ga2b187f396db29b9095a3cc19e197b1b0">visual_rectangle_get_height</a> (drect),
<a name="l00843"></a>00843                                  src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a> * <a class="code" href="group__VisRectangle.html#gaccc4568decac329dfbc065ece6a4fdec">visual_rectangle_get_width</a> (drect),
<a name="l00844"></a>00844                                  src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>);
<a name="l00845"></a>00845 
<a name="l00846"></a>00846     <a class="code" href="group__VisVideo.html#gaefb8348e556887774f1119473379954b" title="Allocates a buffer for the VisVideo.">visual_video_allocate_buffer</a> (svid);
<a name="l00847"></a>00847 
<a name="l00848"></a>00848     <span class="comment">/* Scale the source to the dest rectangle it&#39;s size */</span>
<a name="l00849"></a>00849     <a class="code" href="group__VisVideo.html#gaa7c863749150de3723d9ea4f0fd05796" title="Scale VisVideo.">visual_video_scale</a> (svid, ssrc, scale_method);
<a name="l00850"></a>00850 
<a name="l00851"></a>00851     frect = <a class="code" href="group__VisRectangle.html#ga310b751ced832bebd42949321e057cf4">visual_rectangle_clone</a> (drect);
<a name="l00852"></a>00852     <a class="code" href="group__VisRectangle.html#ga8fb025b070fa13f7c30a9b5b517d3083">visual_rectangle_normalize</a> (frect);
<a name="l00853"></a>00853 
<a name="l00854"></a>00854     <span class="comment">/* Blit the scaled source into the dest rectangle */</span>
<a name="l00855"></a>00855     error = <a class="code" href="group__VisVideo.html#ga5d021227ef88d4e58c27c0809575eb4a">visual_video_blit_overlay_rectangle_custom</a> (dest, drect, svid, frect, compfunc);
<a name="l00856"></a>00856 
<a name="l00857"></a>00857 out:
<a name="l00858"></a>00858     <span class="keywordflow">if</span> (frect)  <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (frect);
<a name="l00859"></a>00859     <span class="keywordflow">if</span> (sbound) <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (sbound);
<a name="l00860"></a>00860 
<a name="l00861"></a>00861     <span class="keywordflow">if</span> (svid)   <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (svid));
<a name="l00862"></a>00862     <span class="keywordflow">if</span> (ssrc)   <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (ssrc));
<a name="l00863"></a>00863 
<a name="l00864"></a>00864     <span class="keywordflow">return</span> error;
<a name="l00865"></a>00865 }
<a name="l00866"></a>00866 
<a name="l00867"></a><a class="code" href="group__VisVideo.html#ga97113f079df09d012be622b5fbe035a2">00867</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga97113f079df09d012be622b5fbe035a2" title="This function blits a VisVideo into another VisVideo.">visual_video_blit_overlay</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> alpha)
<a name="l00868"></a>00868 {
<a name="l00869"></a>00869     <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#ga169d27a229fcd69da5a734118cb9b410">visual_video_blit_overlay_custom</a> (dest, src, x, y,
<a name="l00870"></a>00870             <a class="code" href="group__VisVideo.html#ga88d9b64b8ceba3abe70307ffe5a98555">visual_video_composite_get_function</a> (dest, src, alpha));
<a name="l00871"></a>00871 }
<a name="l00872"></a>00872 
<a name="l00873"></a><a class="code" href="group__VisVideo.html#ga169d27a229fcd69da5a734118cb9b410">00873</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga169d27a229fcd69da5a734118cb9b410">visual_video_blit_overlay_custom</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <a class="code" href="group__VisVideo.html#gaf8f77558989c132a78a62394f2ef7ff1" title="A custom composite function needs this signature.">VisVideoCustomCompositeFunc</a> compfunc)
<a name="l00874"></a>00874 {
<a name="l00875"></a>00875     <span class="keywordtype">int</span> error = <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00876"></a>00876 
<a name="l00877"></a>00877     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *transform = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00878"></a>00878     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *srcp = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00879"></a>00879     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dregion = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00880"></a>00880     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *sregion = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00881"></a>00881     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *tempregion = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00882"></a>00882     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *redestrect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00883"></a>00883     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *drect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00884"></a>00884     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *srect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00885"></a>00885     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *trect = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00886"></a>00886 
<a name="l00887"></a>00887     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00888"></a>00888     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src  != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00889"></a>00889     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (compfunc != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba606cf7fa9aaca062a61fce0dcd7c8ef3" title="Something is NULL that shouldn&#39;t be.">VISUAL_ERROR_NULL</a>);
<a name="l00890"></a>00890 
<a name="l00891"></a>00891     <span class="comment">/* We can&#39;t overlay GL surfaces so don&#39;t even try */</span>
<a name="l00892"></a>00892     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> != <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614caf0d4ce0057f2e910d8d1cc76feab5428" title="openGL surface flag.">VISUAL_VIDEO_DEPTH_GL</a> ||
<a name="l00893"></a>00893             src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> != <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614caf0d4ce0057f2e910d8d1cc76feab5428" title="openGL surface flag.">VISUAL_VIDEO_DEPTH_GL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>);
<a name="l00894"></a>00894 
<a name="l00895"></a>00895     drect = <a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (dest);
<a name="l00896"></a>00896     srect = <a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (src);
<a name="l00897"></a>00897 
<a name="l00898"></a>00898     <span class="keywordflow">if</span> (!<a class="code" href="group__VisRectangle.html#ga22460a08ef7a9c1ddce375bd28e51795">visual_rectangle_intersects</a> (drect, srect)) {
<a name="l00899"></a>00899         error = -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>;
<a name="l00900"></a>00900         <span class="keywordflow">goto</span> out;
<a name="l00901"></a>00901     }
<a name="l00902"></a>00902 
<a name="l00903"></a>00903     <span class="comment">/* We&#39;re not the same depth, converting */</span>
<a name="l00904"></a>00904     <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> != src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>) {
<a name="l00905"></a>00905         transform = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l00906"></a>00906 
<a name="l00907"></a>00907         <a class="code" href="group__VisVideo.html#ga843336f680cd6714571f9b9e06d40449" title="Sets the depth for a VisVideo.">visual_video_set_depth</a> (transform, dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>);
<a name="l00908"></a>00908         <a class="code" href="group__VisVideo.html#gab483fa7ca87cea384cf890286f35d8c5" title="Sets the dimension for a VisVideo.">visual_video_set_dimension</a> (transform, src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>, src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>);
<a name="l00909"></a>00909 
<a name="l00910"></a>00910         <a class="code" href="group__VisVideo.html#gaefb8348e556887774f1119473379954b" title="Allocates a buffer for the VisVideo.">visual_video_allocate_buffer</a> (transform);
<a name="l00911"></a>00911 
<a name="l00912"></a>00912         <a class="code" href="group__VisVideo.html#ga9580addd8cd5a8abddec4842b953d719" title="Video depth transforms one VisVideo into another using the depth information stored within the VisVid...">visual_video_depth_transform</a> (transform, src);
<a name="l00913"></a>00913     }
<a name="l00914"></a>00914 
<a name="l00915"></a>00915     <span class="comment">/* Setting all the pointers right */</span>
<a name="l00916"></a>00916     <span class="keywordflow">if</span> (transform != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00917"></a>00917         srcp = transform;
<a name="l00918"></a>00918     <span class="keywordflow">else</span>
<a name="l00919"></a>00919         srcp = src;
<a name="l00920"></a>00920 
<a name="l00921"></a>00921     dregion = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l00922"></a>00922     sregion = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l00923"></a>00923     tempregion = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l00924"></a>00924 
<a name="l00925"></a>00925     <span class="comment">/* Negative offset fixture */</span>
<a name="l00926"></a>00926     <span class="keywordflow">if</span> (x &lt; 0) {
<a name="l00927"></a>00927         <a class="code" href="group__VisRectangle.html#ga1ae7365150fe6ac40bc4ca0f7caf7270">visual_rectangle_set_x</a> (srect, <a class="code" href="group__VisRectangle.html#ga8f4fcfe2e4839d2368da0fa7d4f80131">visual_rectangle_get_x</a> (srect) - x);
<a name="l00928"></a>00928         <a class="code" href="group__VisRectangle.html#ga863d7682e7bcbf7cf00ec180fc7754de">visual_rectangle_set_width</a> (srect, <a class="code" href="group__VisRectangle.html#gaccc4568decac329dfbc065ece6a4fdec">visual_rectangle_get_width</a> (srect) + x);
<a name="l00929"></a>00929         x = 0;
<a name="l00930"></a>00930     }
<a name="l00931"></a>00931 
<a name="l00932"></a>00932     <span class="keywordflow">if</span> (y &lt; 0) {
<a name="l00933"></a>00933         <a class="code" href="group__VisRectangle.html#ga8727c6ce7e88a764c5e70924c0fa1c38">visual_rectangle_set_y</a> (srect, <a class="code" href="group__VisRectangle.html#ga42fc0bad09ab6bcfbc8fdd5b6ddf01e1">visual_rectangle_get_y</a> (srect) - y);
<a name="l00934"></a>00934         <a class="code" href="group__VisRectangle.html#ga171e9ecda3cc7e18ac6478f3282faafb">visual_rectangle_set_height</a> (srect, <a class="code" href="group__VisRectangle.html#ga2b187f396db29b9095a3cc19e197b1b0">visual_rectangle_get_height</a> (srect) + y);
<a name="l00935"></a>00935         y = 0;
<a name="l00936"></a>00936     }
<a name="l00937"></a>00937 
<a name="l00938"></a>00938     <span class="comment">/* Retrieve sub regions */</span>
<a name="l00939"></a>00939     trect = <a class="code" href="group__VisRectangle.html#ga405b754eb9d94bbe5260c026ad2d8268">visual_rectangle_new</a> (x, y, <a class="code" href="group__VisRectangle.html#gaccc4568decac329dfbc065ece6a4fdec">visual_rectangle_get_width</a> (srect), <a class="code" href="group__VisRectangle.html#ga2b187f396db29b9095a3cc19e197b1b0">visual_rectangle_get_height</a> (srect));
<a name="l00940"></a>00940 
<a name="l00941"></a>00941     <span class="keywordflow">if</span> ((error = <a class="code" href="group__VisVideo.html#ga80916a75034ab65cbcdf1ba135edf97f">visual_video_region_sub_with_boundary</a> (dregion, drect, dest, trect)) != <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>)
<a name="l00942"></a>00942         <span class="keywordflow">goto</span> out;
<a name="l00943"></a>00943 
<a name="l00944"></a>00944     redestrect = <a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (dregion);
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     <span class="keywordflow">if</span> ((error = <a class="code" href="group__VisVideo.html#ga61f3984d3cf8a4957908b1ca0765fda9" title="Creates a sub region of a VisVideo.">visual_video_region_sub</a> (tempregion, srcp, srect)) != <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>)
<a name="l00947"></a>00947         <span class="keywordflow">goto</span> out;
<a name="l00948"></a>00948 
<a name="l00949"></a>00949     <span class="keywordflow">if</span> ((error = <a class="code" href="group__VisVideo.html#ga80916a75034ab65cbcdf1ba135edf97f">visual_video_region_sub_with_boundary</a> (sregion, drect, tempregion, redestrect)) != <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>)
<a name="l00950"></a>00950         <span class="keywordflow">goto</span> out;
<a name="l00951"></a>00951 
<a name="l00952"></a>00952     <span class="comment">/* Call blitter */</span>
<a name="l00953"></a>00953     compfunc (dregion, sregion);
<a name="l00954"></a>00954 
<a name="l00955"></a>00955 out:
<a name="l00956"></a>00956     <span class="keywordflow">if</span> (redestrect) <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (redestrect);
<a name="l00957"></a>00957     <span class="keywordflow">if</span> (drect)      <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (drect);
<a name="l00958"></a>00958     <span class="keywordflow">if</span> (srect)      <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (srect);
<a name="l00959"></a>00959     <span class="keywordflow">if</span> (trect)      <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (trect);
<a name="l00960"></a>00960 
<a name="l00961"></a>00961     <span class="comment">/* If we had a transform buffer, it&#39;s time to get rid of it */</span>
<a name="l00962"></a>00962     <span class="keywordflow">if</span> (transform)  <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (transform));
<a name="l00963"></a>00963     <span class="keywordflow">if</span> (dregion)    <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (dregion));
<a name="l00964"></a>00964     <span class="keywordflow">if</span> (sregion)    <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (sregion));
<a name="l00965"></a>00965     <span class="keywordflow">if</span> (tempregion) <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (tempregion));
<a name="l00966"></a>00966 
<a name="l00967"></a>00967     <span class="keywordflow">return</span> error;
<a name="l00968"></a>00968 }
<a name="l00969"></a>00969 
<a name="l00970"></a>00970 
<a name="l00971"></a><a class="code" href="group__VisVideo.html#ga9e418e83b7b07a2fbb7b54374f07bbe1">00971</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga9e418e83b7b07a2fbb7b54374f07bbe1" title="Sets a certain color as the alpha channel and the density for the non alpha channel colors...">visual_video_fill_alpha_color</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <a class="code" href="group__VisColor.html#ga97b8da0933a45b795491a2479671b726">VisColor</a> *color, uint8_t density)
<a name="l00972"></a>00972 {
<a name="l00973"></a>00973     <span class="keywordtype">int</span> x, y;
<a name="l00974"></a>00974     <span class="keywordtype">int</span> col = 0;
<a name="l00975"></a>00975     uint32_t *vidbuf;
<a name="l00976"></a>00976 
<a name="l00977"></a>00977     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l00978"></a>00978     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>);
<a name="l00979"></a>00979 
<a name="l00980"></a>00980     col = (color-&gt;r &lt;&lt; 16 | color-&gt;g &lt;&lt; 8 | color-&gt;b);
<a name="l00981"></a>00981 
<a name="l00982"></a>00982     vidbuf = <a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (video);
<a name="l00983"></a>00983 
<a name="l00984"></a>00984     <span class="comment">/* FIXME byte order sensitive */</span>
<a name="l00985"></a>00985     <span class="keywordflow">for</span> (y = 0; y &lt; video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>; y++) {
<a name="l00986"></a>00986         <span class="keywordflow">for</span> (x = 0; x &lt; video-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>; x++) {
<a name="l00987"></a>00987             <span class="keywordflow">if</span> ((*vidbuf &amp; 0x00ffffff) == col)
<a name="l00988"></a>00988                 *vidbuf = col;
<a name="l00989"></a>00989             <span class="keywordflow">else</span>
<a name="l00990"></a>00990                 *vidbuf |= density &lt;&lt; 24;
<a name="l00991"></a>00991 
<a name="l00992"></a>00992             vidbuf++;
<a name="l00993"></a>00993         }
<a name="l00994"></a>00994 
<a name="l00995"></a>00995         vidbuf += video-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> - (video-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> * video-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>);
<a name="l00996"></a>00996     }
<a name="l00997"></a>00997 
<a name="l00998"></a>00998     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l00999"></a>00999 }
<a name="l01000"></a>01000 
<a name="l01001"></a><a class="code" href="group__VisVideo.html#ga12bbcbd08dc63e191747dbdc859271ae">01001</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga12bbcbd08dc63e191747dbdc859271ae" title="Sets a certain alpha value for the complete buffer in the VisVideo.">visual_video_fill_alpha</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, uint8_t density)
<a name="l01002"></a>01002 {
<a name="l01003"></a>01003     <span class="keywordtype">int</span> x, y;
<a name="l01004"></a>01004     uint8_t *vidbuf;
<a name="l01005"></a>01005 
<a name="l01006"></a>01006     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01007"></a>01007     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>);
<a name="l01008"></a>01008 
<a name="l01009"></a>01009     vidbuf = (uint8_t *) <a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (video) + 3;
<a name="l01010"></a>01010 
<a name="l01011"></a>01011     <span class="comment">/* FIXME byte order sensitive */</span>
<a name="l01012"></a>01012     <span class="keywordflow">for</span> (y = 0; y &lt; video-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>; y++) {
<a name="l01013"></a>01013         <span class="keywordflow">for</span> (x = 0; x &lt; video-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>; x++)
<a name="l01014"></a>01014             *(vidbuf += video-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>) = density;
<a name="l01015"></a>01015 
<a name="l01016"></a>01016         vidbuf += video-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> - (video-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> * video-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>);
<a name="l01017"></a>01017     }
<a name="l01018"></a>01018 
<a name="l01019"></a>01019     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01020"></a>01020 }
<a name="l01021"></a>01021 
<a name="l01022"></a><a class="code" href="group__VisVideo.html#gaa2574409f9b0c3040e78ab3b6ec1da4c">01022</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gaa2574409f9b0c3040e78ab3b6ec1da4c">visual_video_fill_alpha_rectangle</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, uint8_t density, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *rect)
<a name="l01023"></a>01023 {
<a name="l01024"></a>01024     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *rvid = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01025"></a>01025     <span class="keywordtype">int</span> errret = <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01026"></a>01026 
<a name="l01027"></a>01027     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01028"></a>01028     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>);
<a name="l01029"></a>01029     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (rect != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba481166dab6072a27b23a0561e283ef7d" title="The VisRectangle is NULL.">VISUAL_ERROR_RECTANGLE_NULL</a>);
<a name="l01030"></a>01030 
<a name="l01031"></a>01031     rvid = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l01032"></a>01032 
<a name="l01033"></a>01033     errret = <a class="code" href="group__VisVideo.html#ga61f3984d3cf8a4957908b1ca0765fda9" title="Creates a sub region of a VisVideo.">visual_video_region_sub</a> (video, rvid, rect);
<a name="l01034"></a>01034 
<a name="l01035"></a>01035     <span class="keywordflow">if</span> (errret &lt; 0)
<a name="l01036"></a>01036         <span class="keywordflow">goto</span> out;
<a name="l01037"></a>01037 
<a name="l01038"></a>01038     <a class="code" href="group__VisVideo.html#ga12bbcbd08dc63e191747dbdc859271ae" title="Sets a certain alpha value for the complete buffer in the VisVideo.">visual_video_fill_alpha</a> (rvid, density);
<a name="l01039"></a>01039 
<a name="l01040"></a>01040 out:
<a name="l01041"></a>01041     <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (rvid));
<a name="l01042"></a>01042 
<a name="l01043"></a>01043     <span class="keywordflow">return</span> errret;
<a name="l01044"></a>01044 }
<a name="l01045"></a>01045 
<a name="l01046"></a><a class="code" href="group__VisVideo.html#ga2f1e5deba1e33dfb6476e9a50576efca">01046</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga2f1e5deba1e33dfb6476e9a50576efca" title="This function is used to fill a VisVideo with one color.">visual_video_fill_color</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <a class="code" href="group__VisColor.html#ga97b8da0933a45b795491a2479671b726">VisColor</a> *rcolor)
<a name="l01047"></a>01047 {
<a name="l01048"></a>01048     <a class="code" href="group__VisColor.html#ga97b8da0933a45b795491a2479671b726">VisColor</a> color;
<a name="l01049"></a>01049 
<a name="l01050"></a>01050     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01051"></a>01051 
<a name="l01052"></a>01052     <span class="keywordflow">if</span> (rcolor == <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01053"></a>01053         <a class="code" href="group__VisColor.html#gac889b7f6ef756c50a0463aacc6700efd">visual_color_set</a> (&amp;color, 0, 0, 0);
<a name="l01054"></a>01054     <span class="keywordflow">else</span>
<a name="l01055"></a>01055         <a class="code" href="group__VisColor.html#gab57d1fa5fb3506ac9876c58e31792c8d">visual_color_copy</a> (&amp;color, rcolor);
<a name="l01056"></a>01056 
<a name="l01057"></a>01057     <span class="keywordflow">switch</span> (video-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>) {
<a name="l01058"></a>01058         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>:
<a name="l01059"></a>01059             <a class="code" href="lv__video__fill_8c.html#a5c434c1dc6c3dcadfc31faf8fa460040">visual_video_fill_color_index8</a> (video, &amp;color);
<a name="l01060"></a>01060             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01061"></a>01061 
<a name="l01062"></a>01062         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>:
<a name="l01063"></a>01063             <a class="code" href="lv__video__fill_8c.html#a6a00a760d51010fc569baa7325bd9950">visual_video_fill_color_rgb16</a> (video, &amp;color);
<a name="l01064"></a>01064             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01065"></a>01065 
<a name="l01066"></a>01066         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>:
<a name="l01067"></a>01067             <a class="code" href="lv__video__fill_8c.html#a4ac52c7a87cd92dce45667986baac5aa">visual_video_fill_color_rgb24</a> (video, &amp;color);
<a name="l01068"></a>01068             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01069"></a>01069 
<a name="l01070"></a>01070         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>:
<a name="l01071"></a>01071             <a class="code" href="lv__video__fill_8c.html#afdc9ea17f5961a929c38c7204934ee64">visual_video_fill_color_argb32</a> (video, &amp;color);
<a name="l01072"></a>01072             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01073"></a>01073 
<a name="l01074"></a>01074 
<a name="l01075"></a>01075         <span class="keywordflow">default</span>:
<a name="l01076"></a>01076             <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>;
<a name="l01077"></a>01077     }
<a name="l01078"></a>01078 }
<a name="l01079"></a>01079 
<a name="l01080"></a><a class="code" href="group__VisVideo.html#ga5e5548135896adf8d9e3a01b3081f5c2">01080</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga5e5548135896adf8d9e3a01b3081f5c2">visual_video_fill_color_rectangle</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video, <a class="code" href="group__VisColor.html#ga97b8da0933a45b795491a2479671b726">VisColor</a> *color, <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *rect)
<a name="l01081"></a>01081 {
<a name="l01082"></a>01082     <span class="keywordtype">int</span> error = <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01083"></a>01083 
<a name="l01084"></a>01084     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *vrect  = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01085"></a>01085     <a class="code" href="group__VisRectangle.html#gadc33c9977912287db32b4ca9e0622b07">VisRectangle</a> *dbound = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01086"></a>01086     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *svid = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01087"></a>01087 
<a name="l01088"></a>01088     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (video != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01089"></a>01089     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (color != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55badfeeed2776071c4e903d930a583fcee7" title="The VisColor is NULL.">VISUAL_ERROR_COLOR_NULL</a>);
<a name="l01090"></a>01090     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (rect != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba481166dab6072a27b23a0561e283ef7d" title="The VisRectangle is NULL.">VISUAL_ERROR_RECTANGLE_NULL</a>);
<a name="l01091"></a>01091 
<a name="l01092"></a>01092     vrect = <a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (video);
<a name="l01093"></a>01093 
<a name="l01094"></a>01094     <span class="keywordflow">if</span> (!<a class="code" href="group__VisRectangle.html#ga22460a08ef7a9c1ddce375bd28e51795">visual_rectangle_intersects</a> (vrect, rect)) {
<a name="l01095"></a>01095         error = -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>;
<a name="l01096"></a>01096         <span class="keywordflow">goto</span> out;
<a name="l01097"></a>01097     }
<a name="l01098"></a>01098 
<a name="l01099"></a>01099     svid = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l01100"></a>01100 
<a name="l01101"></a>01101     dbound = <a class="code" href="group__VisVideo.html#ga0f352c82cfc479f44954dafe7725a3f5" title="Converts the VisVideo it&#39;s buffer boundries to a VisRectangle.">visual_video_get_boundary</a> (video);
<a name="l01102"></a>01102 
<a name="l01103"></a>01103     <a class="code" href="group__VisVideo.html#ga80916a75034ab65cbcdf1ba135edf97f">visual_video_region_sub_with_boundary</a> (svid, dbound, video, rect);
<a name="l01104"></a>01104 
<a name="l01105"></a>01105     error = <a class="code" href="group__VisVideo.html#ga2f1e5deba1e33dfb6476e9a50576efca" title="This function is used to fill a VisVideo with one color.">visual_video_fill_color</a> (svid, color);
<a name="l01106"></a>01106 
<a name="l01107"></a>01107 out:
<a name="l01108"></a>01108 
<a name="l01109"></a>01109     <span class="keywordflow">if</span> (dbound) <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (dbound);
<a name="l01110"></a>01110     <span class="keywordflow">if</span> (vrect)  <a class="code" href="group__VisRectangle.html#gaecd7996f7d0a935acb1918ce780fe4c3">visual_rectangle_free</a> (vrect);
<a name="l01111"></a>01111     <span class="keywordflow">if</span> (svid)   <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (svid));
<a name="l01112"></a>01112 
<a name="l01113"></a>01113     <span class="keywordflow">return</span> error;
<a name="l01114"></a>01114 }
<a name="l01115"></a>01115 
<a name="l01116"></a>01116 
<a name="l01117"></a><a class="code" href="group__VisVideo.html#ga676d2c5d03ea439ba1430b85a27d38d2">01117</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga676d2c5d03ea439ba1430b85a27d38d2" title="Flips the byte ordering of each pixel.">visual_video_flip_pixel_bytes</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l01118"></a>01118 {
<a name="l01119"></a>01119     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (<a class="code" href="group__VisVideo.html#gaf7cff6a8d7e1d91a16e894e58b67dc73" title="Checks if two VisVideo objects are the same depth, pitch and dimension wise.">visual_video_compare</a> (dest, src), -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba10b90ca5e86bcbee96dae1c05c4e4ef9" title="The two VisVideo their configuration are not indentical.">VISUAL_ERROR_VIDEO_NOT_INDENTICAL</a>);
<a name="l01120"></a>01120     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (<a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (dest) != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55baeb0971410dc2216ea803cfc3e11acbf2" title="The VisVideo doesn&#39;t point to a pixel buffer.">VISUAL_ERROR_VIDEO_PIXELS_NULL</a>);
<a name="l01121"></a>01121     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (<a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (src)  != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55baeb0971410dc2216ea803cfc3e11acbf2" title="The VisVideo doesn&#39;t point to a pixel buffer.">VISUAL_ERROR_VIDEO_PIXELS_NULL</a>);
<a name="l01122"></a>01122 
<a name="l01123"></a>01123     <span class="keywordflow">switch</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>) {
<a name="l01124"></a>01124         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>:
<a name="l01125"></a>01125             <a class="code" href="lv__video__convert_8c.html#a6c8fbe68d98a53b9fd2a25e29ebb4f2b">visual_video_flip_pixel_bytes_color16</a> (dest, src);
<a name="l01126"></a>01126             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01127"></a>01127         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>:
<a name="l01128"></a>01128             <a class="code" href="lv__video__convert_8c.html#a4f68c90c76f95a55f49dd02ed6290bc6">visual_video_flip_pixel_bytes_color24</a> (dest, src);
<a name="l01129"></a>01129             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01130"></a>01130         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>:
<a name="l01131"></a>01131             <a class="code" href="lv__video__convert_8c.html#a81aa564cf48ae5880f426a4c2fd9bdf5">visual_video_flip_pixel_bytes_color32</a> (dest, src);
<a name="l01132"></a>01132             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01133"></a>01133         <span class="keywordflow">default</span>:
<a name="l01134"></a>01134             <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>;
<a name="l01135"></a>01135     }
<a name="l01136"></a>01136 }
<a name="l01137"></a>01137 
<a name="l01138"></a><a class="code" href="group__VisVideo.html#ga0fdbc7610f92ab5412c916741c89d532">01138</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga0fdbc7610f92ab5412c916741c89d532">visual_video_rotate</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisVideo.html#ga8da8328c2015cc838a1987c8a874cb1b" title="Enumerate that defines video rotate types, used with the visual_video_rotate_*() functions.">VisVideoRotateDegrees</a> degrees)
<a name="l01139"></a>01139 {
<a name="l01140"></a>01140     <span class="keywordtype">int</span> ret = <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01141"></a>01141 
<a name="l01142"></a>01142     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01143"></a>01143     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01144"></a>01144 
<a name="l01145"></a>01145     <span class="keywordflow">switch</span> (degrees) {
<a name="l01146"></a>01146         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga8da8328c2015cc838a1987c8a874cb1ba51da5b7c354e47de841d3426c433c9cb" title="No rotating.">VISUAL_VIDEO_ROTATE_NONE</a>:
<a name="l01147"></a>01147             <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> == src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> &amp;&amp; dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a> == src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>)
<a name="l01148"></a>01148                 ret = <a class="code" href="group__VisVideo.html#ga97113f079df09d012be622b5fbe035a2" title="This function blits a VisVideo into another VisVideo.">visual_video_blit_overlay</a> (dest, src, 0, 0, <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
<a name="l01149"></a>01149             <span class="keywordflow">else</span>
<a name="l01150"></a>01150                 ret = -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>;
<a name="l01151"></a>01151 
<a name="l01152"></a>01152             <span class="keywordflow">break</span>;
<a name="l01153"></a>01153 
<a name="l01154"></a>01154         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga8da8328c2015cc838a1987c8a874cb1bad62b99f349781c12ef5eedd518257f60" title="90 degrees rotate.">VISUAL_VIDEO_ROTATE_90</a>:
<a name="l01155"></a>01155             ret = rotate_90 (dest, src);
<a name="l01156"></a>01156 
<a name="l01157"></a>01157             <span class="keywordflow">break</span>;
<a name="l01158"></a>01158 
<a name="l01159"></a>01159         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga8da8328c2015cc838a1987c8a874cb1ba332f1f0e97794cfed516eb6dd9905a71" title="180 degrees rotate.">VISUAL_VIDEO_ROTATE_180</a>:
<a name="l01160"></a>01160             ret = rotate_180 (dest, src);
<a name="l01161"></a>01161 
<a name="l01162"></a>01162             <span class="keywordflow">break</span>;
<a name="l01163"></a>01163 
<a name="l01164"></a>01164         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga8da8328c2015cc838a1987c8a874cb1badf44e40c46155e4a0291b32a8e908695" title="270 degrees rotate.">VISUAL_VIDEO_ROTATE_270</a>:
<a name="l01165"></a>01165             ret = rotate_270 (dest, src);
<a name="l01166"></a>01166 
<a name="l01167"></a>01167             <span class="keywordflow">break</span>;
<a name="l01168"></a>01168 
<a name="l01169"></a>01169         <span class="keywordflow">default</span>:
<a name="l01170"></a>01170             ret = -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55babc31535796e0eddac707c7120fad5d72" title="The VisVideoRotateDegrees argument is not valid.">VISUAL_ERROR_VIDEO_INVALID_ROTATE</a>;
<a name="l01171"></a>01171 
<a name="l01172"></a>01172             <span class="keywordflow">break</span>;
<a name="l01173"></a>01173     }
<a name="l01174"></a>01174 
<a name="l01175"></a>01175     <span class="keywordflow">return</span> ret;
<a name="l01176"></a>01176 }
<a name="l01177"></a>01177 
<a name="l01178"></a><a class="code" href="group__VisVideo.html#ga600d4fd8b2c6fcebe48c55da5ec96c7b">01178</a> <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *<a class="code" href="group__VisVideo.html#ga600d4fd8b2c6fcebe48c55da5ec96c7b">visual_video_rotate_new</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisVideo.html#ga8da8328c2015cc838a1987c8a874cb1b" title="Enumerate that defines video rotate types, used with the visual_video_rotate_*() functions.">VisVideoRotateDegrees</a> degrees)
<a name="l01179"></a>01179 {
<a name="l01180"></a>01180     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest;
<a name="l01181"></a>01181     <span class="keywordtype">int</span> nwidth;
<a name="l01182"></a>01182     <span class="keywordtype">int</span> nheight;
<a name="l01183"></a>01183 
<a name="l01184"></a>01184     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01185"></a>01185 
<a name="l01186"></a>01186     <span class="keywordflow">switch</span> (degrees) {
<a name="l01187"></a>01187         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga8da8328c2015cc838a1987c8a874cb1ba51da5b7c354e47de841d3426c433c9cb" title="No rotating.">VISUAL_VIDEO_ROTATE_NONE</a>:
<a name="l01188"></a>01188         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga8da8328c2015cc838a1987c8a874cb1ba332f1f0e97794cfed516eb6dd9905a71" title="180 degrees rotate.">VISUAL_VIDEO_ROTATE_180</a>:
<a name="l01189"></a>01189             nwidth = src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>;
<a name="l01190"></a>01190             nheight = src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>;
<a name="l01191"></a>01191 
<a name="l01192"></a>01192             <span class="keywordflow">break</span>;
<a name="l01193"></a>01193 
<a name="l01194"></a>01194         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga8da8328c2015cc838a1987c8a874cb1bad62b99f349781c12ef5eedd518257f60" title="90 degrees rotate.">VISUAL_VIDEO_ROTATE_90</a>:
<a name="l01195"></a>01195         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga8da8328c2015cc838a1987c8a874cb1badf44e40c46155e4a0291b32a8e908695" title="270 degrees rotate.">VISUAL_VIDEO_ROTATE_270</a>:
<a name="l01196"></a>01196             nwidth = src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>;
<a name="l01197"></a>01197             nheight = src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>;
<a name="l01198"></a>01198 
<a name="l01199"></a>01199             <span class="keywordflow">break</span>;
<a name="l01200"></a>01200 
<a name="l01201"></a>01201         <span class="keywordflow">default</span>:
<a name="l01202"></a>01202             <span class="keywordflow">return</span> <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01203"></a>01203 
<a name="l01204"></a>01204             <span class="keywordflow">break</span>;
<a name="l01205"></a>01205     }
<a name="l01206"></a>01206 
<a name="l01207"></a>01207     dest = <a class="code" href="group__VisVideo.html#ga334b47917488c4d5bf50c01f7ec0078a" title="Creates a new VisVideo and also allocates a buffer.">visual_video_new_with_buffer</a> (nwidth, nheight, src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>);
<a name="l01208"></a>01208 
<a name="l01209"></a>01209     <a class="code" href="group__VisVideo.html#ga0fdbc7610f92ab5412c916741c89d532">visual_video_rotate</a> (dest, src, degrees);
<a name="l01210"></a>01210 
<a name="l01211"></a>01211     <span class="keywordflow">return</span> dest;
<a name="l01212"></a>01212 }
<a name="l01213"></a>01213 
<a name="l01214"></a>01214 <span class="comment">/* rotate functions, works with all depths now */</span>
<a name="l01215"></a>01215 <span class="comment">/* FIXME: do more testing with those badasses */</span>
<a name="l01216"></a>01216 <span class="keyword">static</span> <span class="keywordtype">int</span> rotate_90 (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l01217"></a>01217 {
<a name="l01218"></a>01218     <span class="keywordtype">int</span> x, y, i;
<a name="l01219"></a>01219 
<a name="l01220"></a>01220     uint8_t *tsbuf = src-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>[src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>-1];
<a name="l01221"></a>01221     uint8_t *dbuf;
<a name="l01222"></a>01222     uint8_t *sbuf = tsbuf;
<a name="l01223"></a>01223 
<a name="l01224"></a>01224     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> == src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>);
<a name="l01225"></a>01225     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a> == src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>);
<a name="l01226"></a>01226 
<a name="l01227"></a>01227     <span class="keywordflow">for</span> (y = 0; y &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>; y++) {
<a name="l01228"></a>01228         dbuf = dest-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>[y];
<a name="l01229"></a>01229 
<a name="l01230"></a>01230         <span class="keywordflow">for</span> (x = 0; x &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>; x++) {
<a name="l01231"></a>01231             <span class="keywordflow">for</span> (i = 0; i &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>; i++) {
<a name="l01232"></a>01232                 *(dbuf++) = *(sbuf + i);
<a name="l01233"></a>01233             }
<a name="l01234"></a>01234 
<a name="l01235"></a>01235             sbuf -= src-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a>;
<a name="l01236"></a>01236         }
<a name="l01237"></a>01237 
<a name="l01238"></a>01238         tsbuf += src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>;
<a name="l01239"></a>01239         sbuf = tsbuf;
<a name="l01240"></a>01240     }
<a name="l01241"></a>01241 
<a name="l01242"></a>01242     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01243"></a>01243 }
<a name="l01244"></a>01244 
<a name="l01245"></a>01245 <span class="keyword">static</span> <span class="keywordtype">int</span> rotate_180 (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l01246"></a>01246 {
<a name="l01247"></a>01247     <span class="keywordtype">int</span> x, y, i;
<a name="l01248"></a>01248 
<a name="l01249"></a>01249     uint8_t *dbuf;
<a name="l01250"></a>01250     uint8_t *sbuf;
<a name="l01251"></a>01251 
<a name="l01252"></a>01252     <span class="keyword">const</span> <span class="keywordtype">int</span> h1 = src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a> - 1;
<a name="l01253"></a>01253     <span class="keyword">const</span> <span class="keywordtype">int</span> w1 = (src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> - 1) * src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>;
<a name="l01254"></a>01254 
<a name="l01255"></a>01255     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> == src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>);
<a name="l01256"></a>01256     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a> == src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>);
<a name="l01257"></a>01257 
<a name="l01258"></a>01258     <span class="keywordflow">for</span> (y = 0; y &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>; y++) {
<a name="l01259"></a>01259         dbuf = dest-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>[y];
<a name="l01260"></a>01260         sbuf = (uint8_t *) src-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>[h1 - y] + w1;
<a name="l01261"></a>01261 
<a name="l01262"></a>01262         for (x = 0; x &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>; x++) {
<a name="l01263"></a>01263             <span class="keywordflow">for</span> (i = 0; i &lt; src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>; i++) {
<a name="l01264"></a>01264                 *(dbuf++) = *(sbuf + i);
<a name="l01265"></a>01265             }
<a name="l01266"></a>01266 
<a name="l01267"></a>01267             sbuf -= src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>;
<a name="l01268"></a>01268         }
<a name="l01269"></a>01269     }
<a name="l01270"></a>01270 
<a name="l01271"></a>01271     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01272"></a>01272 }
<a name="l01273"></a>01273 
<a name="l01274"></a>01274 <span class="keyword">static</span> <span class="keywordtype">int</span> rotate_270 (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l01275"></a>01275 {
<a name="l01276"></a>01276     <span class="keywordtype">int</span> x, y, i;
<a name="l01277"></a>01277 
<a name="l01278"></a>01278     uint8_t *tsbuf = (uint8_t *) <a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (src) + src-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a> - src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>;
<a name="l01279"></a>01279     uint8_t *dbuf = <a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (dest);
<a name="l01280"></a>01280     uint8_t *sbuf = tsbuf;
<a name="l01281"></a>01281 
<a name="l01282"></a>01282     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> == src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>);
<a name="l01283"></a>01283     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a> == src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba1541cdbc5352f5d55ab40f8d2537edc1" title="The X or Y value are greater than the VisVideo it&#39;s dimension.">VISUAL_ERROR_VIDEO_OUT_OF_BOUNDS</a>);
<a name="l01284"></a>01284 
<a name="l01285"></a>01285     <span class="keywordflow">for</span> (y = 0; y &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>; y++) {
<a name="l01286"></a>01286         dbuf = dest-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>[y];
<a name="l01287"></a>01287 
<a name="l01288"></a>01288         <span class="keywordflow">for</span> (x = 0; x &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>; x++) {
<a name="l01289"></a>01289             <span class="keywordflow">for</span> (i = 0; i &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>; i++) {
<a name="l01290"></a>01290                 *(dbuf++) = *(sbuf + i);
<a name="l01291"></a>01291             }
<a name="l01292"></a>01292 
<a name="l01293"></a>01293             sbuf += src-&gt;<a class="code" href="struct__VisVideo.html#a1a0e49c2e6ace821672d7166031f29a2" title="Surface it&#39;s pitch value.">pitch</a>;
<a name="l01294"></a>01294         }
<a name="l01295"></a>01295 
<a name="l01296"></a>01296         tsbuf -= src-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>;
<a name="l01297"></a>01297         sbuf = tsbuf;
<a name="l01298"></a>01298     }
<a name="l01299"></a>01299 
<a name="l01300"></a>01300     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01301"></a>01301 }
<a name="l01302"></a>01302 
<a name="l01303"></a><a class="code" href="group__VisVideo.html#ga09fe5afb4942aec521376d32972499b4">01303</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga09fe5afb4942aec521376d32972499b4">visual_video_mirror</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisVideo.html#ga468c60605ebd20b7fa623a7a5e1be6ed" title="Enumerate that defines the video mirror types, used with the visual_video_mirror_*() functions...">VisVideoMirrorOrient</a> orient)
<a name="l01304"></a>01304 {
<a name="l01305"></a>01305     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01306"></a>01306     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01307"></a>01307     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>);
<a name="l01308"></a>01308 
<a name="l01309"></a>01309     <span class="keywordflow">switch</span> (orient) {
<a name="l01310"></a>01310         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga468c60605ebd20b7fa623a7a5e1be6eda58efb9f74ea05d486ac676edf94a94ae" title="No mirroring.">VISUAL_VIDEO_MIRROR_NONE</a>:
<a name="l01311"></a>01311             <a class="code" href="group__VisVideo.html#ga97113f079df09d012be622b5fbe035a2" title="This function blits a VisVideo into another VisVideo.">visual_video_blit_overlay</a> (dest, src, 0, 0, <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
<a name="l01312"></a>01312             <span class="keywordflow">break</span>;
<a name="l01313"></a>01313 
<a name="l01314"></a>01314         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga468c60605ebd20b7fa623a7a5e1be6edadd62f1c02d90d87b8a41a05f1bff8153" title="Mirror on the X ax.">VISUAL_VIDEO_MIRROR_X</a>:
<a name="l01315"></a>01315             mirror_x (dest, src);
<a name="l01316"></a>01316             <span class="keywordflow">break</span>;
<a name="l01317"></a>01317 
<a name="l01318"></a>01318         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga468c60605ebd20b7fa623a7a5e1be6eda9fa95a40826cc994bca54ae08427d751" title="Mirror on the Y ax.">VISUAL_VIDEO_MIRROR_Y</a>:
<a name="l01319"></a>01319             mirror_y (dest, src);
<a name="l01320"></a>01320             <span class="keywordflow">break</span>;
<a name="l01321"></a>01321 
<a name="l01322"></a>01322         <span class="keywordflow">default</span>:
<a name="l01323"></a>01323             <span class="keywordflow">break</span>;
<a name="l01324"></a>01324     }
<a name="l01325"></a>01325 
<a name="l01326"></a>01326     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01327"></a>01327 }
<a name="l01328"></a>01328 
<a name="l01329"></a><a class="code" href="group__VisVideo.html#ga89da07f198f462c9a92b7ffd2b3a7a89">01329</a> <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *<a class="code" href="group__VisVideo.html#ga89da07f198f462c9a92b7ffd2b3a7a89">visual_video_mirror_new</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisVideo.html#ga468c60605ebd20b7fa623a7a5e1be6ed" title="Enumerate that defines the video mirror types, used with the visual_video_mirror_*() functions...">VisVideoMirrorOrient</a> orient)
<a name="l01330"></a>01330 {
<a name="l01331"></a>01331     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video;
<a name="l01332"></a>01332 
<a name="l01333"></a>01333     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01334"></a>01334 
<a name="l01335"></a>01335     video = <a class="code" href="group__VisVideo.html#ga334b47917488c4d5bf50c01f7ec0078a" title="Creates a new VisVideo and also allocates a buffer.">visual_video_new_with_buffer</a> (src-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>, src-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>, src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>);
<a name="l01336"></a>01336 
<a name="l01337"></a>01337     <a class="code" href="group__VisVideo.html#ga09fe5afb4942aec521376d32972499b4">visual_video_mirror</a> (video, src, orient);
<a name="l01338"></a>01338 
<a name="l01339"></a>01339     <span class="keywordflow">return</span> video;
<a name="l01340"></a>01340 }
<a name="l01341"></a>01341 
<a name="l01342"></a>01342 <span class="comment">/* Mirror functions */</span>
<a name="l01343"></a>01343 <span class="keyword">static</span> <span class="keywordtype">int</span> mirror_x (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l01344"></a>01344 {
<a name="l01345"></a>01345     uint8_t *dbuf = <a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (dest);
<a name="l01346"></a>01346     uint8_t *sbuf = <a class="code" href="group__VisVideo.html#ga4211ad04a7b5c09fb1734edcf39a454e" title="Retrieves the pixel buffer from a VisVideo.">visual_video_get_pixels</a> (src);
<a name="l01347"></a>01347     <span class="keyword">const</span> <span class="keywordtype">int</span> step2 = dest-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a> &lt;&lt; 1;
<a name="l01348"></a>01348     <span class="keyword">const</span> <span class="keywordtype">int</span> w1b = (dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> - 1) * dest-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>;
<a name="l01349"></a>01349     <span class="keywordtype">int</span> x, y, i;
<a name="l01350"></a>01350 
<a name="l01351"></a>01351     for (y = 0; y &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>; y++) {
<a name="l01352"></a>01352         sbuf = (uint8_t *) src-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>[y] + w1b;
<a name="l01353"></a>01353         dbuf = dest-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>[y];
<a name="l01354"></a>01354 
<a name="l01355"></a>01355         for (x = 0; x &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>; x++) {
<a name="l01356"></a>01356 
<a name="l01357"></a>01357             <span class="keywordflow">for</span> (i = 0; i &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>; i++)
<a name="l01358"></a>01358                 *(dbuf++) = *(sbuf++);
<a name="l01359"></a>01359 
<a name="l01360"></a>01360             sbuf -= step2;
<a name="l01361"></a>01361         }
<a name="l01362"></a>01362     }
<a name="l01363"></a>01363 
<a name="l01364"></a>01364     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01365"></a>01365 }
<a name="l01366"></a>01366 
<a name="l01367"></a>01367 <span class="keyword">static</span> <span class="keywordtype">int</span> mirror_y (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l01368"></a>01368 {
<a name="l01369"></a>01369     <span class="keywordtype">int</span> y;
<a name="l01370"></a>01370 
<a name="l01371"></a>01371     <span class="keywordflow">for</span> (y = 0; y &lt; dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>; y++) {
<a name="l01372"></a>01372         <a class="code" href="group__VisMem.html#ga1760c6c2fb88ff1df0750a8587175c0f">visual_mem_copy</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>[y],
<a name="l01373"></a>01373                 src-&gt;<a class="code" href="struct__VisVideo.html#ae4f5320a1019d248b0817665d855ef55" title="Pixel row start pointer table.">pixel_rows</a>[dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a> - 1 - y],
<a name="l01374"></a>01374                 dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> * dest-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>);
<a name="l01375"></a>01375     }
<a name="l01376"></a>01376 
<a name="l01377"></a>01377     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01378"></a>01378 }
<a name="l01379"></a>01379 
<a name="l01380"></a><a class="code" href="group__VisVideo.html#ga9580addd8cd5a8abddec4842b953d719">01380</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#ga9580addd8cd5a8abddec4842b953d719" title="Video depth transforms one VisVideo into another using the depth information stored within the VisVid...">visual_video_depth_transform</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l01381"></a>01381 {
<a name="l01382"></a>01382     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01383"></a>01383     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01384"></a>01384 
<a name="l01385"></a>01385     <span class="comment">/* We blit overlay it instead of just visual_mem_copy because the pitch can still be different */</span>
<a name="l01386"></a>01386     <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>)
<a name="l01387"></a>01387         <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#ga97113f079df09d012be622b5fbe035a2" title="This function blits a VisVideo into another VisVideo.">visual_video_blit_overlay</a> (dest, src, 0, 0, <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
<a name="l01388"></a>01388 
<a name="l01389"></a>01389     <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a> || src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>) {
<a name="l01390"></a>01390         <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src-&gt;<a class="code" href="struct__VisVideo.html#a41ac3e7d09a28262a2acb8cbf2809a29" title="Optional pointer to the palette.">pal</a> != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bad459e21641867adec3774e1f08f7c870" title="The VisPalette is NULL.">VISUAL_ERROR_PALETTE_NULL</a>);
<a name="l01391"></a>01391         <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (<a class="code" href="group__VisPalette.html#ga682dedc3f4ece416aaa3358fb485e015">visual_palette_get_size</a> (src-&gt;<a class="code" href="struct__VisVideo.html#a41ac3e7d09a28262a2acb8cbf2809a29" title="Optional pointer to the palette.">pal</a>) == 256, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba4261b4c121333a2255428d379a5b958f" title="Given VisPalette entries are not of the same size.">VISUAL_ERROR_PALETTE_SIZE</a>);
<a name="l01392"></a>01392     }
<a name="l01393"></a>01393 
<a name="l01394"></a>01394     <span class="keywordflow">if</span> (src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>) {
<a name="l01395"></a>01395 
<a name="l01396"></a>01396         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>) {
<a name="l01397"></a>01397             <a class="code" href="lv__video__convert_8c.html#a14a6e65948fcf40f39db6f76dc455b2a">visual_video_index8_to_rgb16</a> (dest, src);
<a name="l01398"></a>01398             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01399"></a>01399         }
<a name="l01400"></a>01400 
<a name="l01401"></a>01401         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>) {
<a name="l01402"></a>01402             <a class="code" href="lv__video__convert_8c.html#aca5ff38a77ffbe5673ee9af2fbd0bc4b">visual_video_index8_to_rgb24</a> (dest, src);
<a name="l01403"></a>01403             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01404"></a>01404         }
<a name="l01405"></a>01405 
<a name="l01406"></a>01406         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>) {
<a name="l01407"></a>01407             <a class="code" href="lv__video__convert_8c.html#a8d16433e02e924b4511a768ace62bbe3">visual_video_index8_to_argb32</a> (dest, src);
<a name="l01408"></a>01408             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01409"></a>01409         }
<a name="l01410"></a>01410 
<a name="l01411"></a>01411     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>) {
<a name="l01412"></a>01412 
<a name="l01413"></a>01413         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>) {
<a name="l01414"></a>01414             <a class="code" href="lv__video__convert_8c.html#aa112ec4bb4e3a1469d50ab29c6f23a2f">visual_video_rgb16_to_index8</a> (dest, src);
<a name="l01415"></a>01415             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01416"></a>01416         }
<a name="l01417"></a>01417 
<a name="l01418"></a>01418         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>) {
<a name="l01419"></a>01419             <a class="code" href="lv__video__convert_8c.html#a8260bc7997b541a79141cb24b1693ba6">visual_video_rgb16_to_rgb24</a> (dest, src);
<a name="l01420"></a>01420             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01421"></a>01421         }
<a name="l01422"></a>01422 
<a name="l01423"></a>01423         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>) {
<a name="l01424"></a>01424             <a class="code" href="lv__video__convert_8c.html#a15a2b79db9a4eade7bdc8d7c21a65587">visual_video_rgb16_to_argb32</a> (dest, src);
<a name="l01425"></a>01425             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01426"></a>01426         }
<a name="l01427"></a>01427 
<a name="l01428"></a>01428     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>) {
<a name="l01429"></a>01429 
<a name="l01430"></a>01430         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>) {
<a name="l01431"></a>01431             <a class="code" href="lv__video__convert_8c.html#a5df2cc5f0b9c38fd311d3e485adc4131">visual_video_rgb24_to_index8</a> (dest, src);
<a name="l01432"></a>01432             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01433"></a>01433         }
<a name="l01434"></a>01434 
<a name="l01435"></a>01435         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>) {
<a name="l01436"></a>01436             <a class="code" href="lv__video__convert_8c.html#aef942816172225120de4c27298bb2b19">visual_video_rgb24_to_rgb16</a> (dest, src);
<a name="l01437"></a>01437             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01438"></a>01438         }
<a name="l01439"></a>01439 
<a name="l01440"></a>01440         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>) {
<a name="l01441"></a>01441             <a class="code" href="lv__video__convert_8c.html#a603e84ebe17612dcbbec7b3b11a96ea0">visual_video_rgb24_to_argb32</a> (dest, src);
<a name="l01442"></a>01442             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01443"></a>01443         }
<a name="l01444"></a>01444 
<a name="l01445"></a>01445     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>) {
<a name="l01446"></a>01446 
<a name="l01447"></a>01447         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>) {
<a name="l01448"></a>01448             <a class="code" href="lv__video__convert_8c.html#a9029195dd44f011120ae999c8e28c59a">visual_video_argb32_to_index8</a> (dest, src);
<a name="l01449"></a>01449             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01450"></a>01450         }
<a name="l01451"></a>01451 
<a name="l01452"></a>01452         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>) {
<a name="l01453"></a>01453             <a class="code" href="lv__video__convert_8c.html#af672d7549f3f97aa2711e612265e2e57">visual_video_argb32_to_rgb16</a> (dest, src);
<a name="l01454"></a>01454             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01455"></a>01455         }
<a name="l01456"></a>01456 
<a name="l01457"></a>01457         <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>) {
<a name="l01458"></a>01458             <a class="code" href="lv__video__convert_8c.html#a67646b12fb895d099da901af717a9554">visual_video_argb32_to_rgb24</a> (dest, src);
<a name="l01459"></a>01459             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01460"></a>01460         }
<a name="l01461"></a>01461     }
<a name="l01462"></a>01462 
<a name="l01463"></a>01463     <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba5c8397779f4c42b0df74f8b24f41448c" title="Could not depth transform a VisVideo.">VISUAL_ERROR_VIDEO_NOT_TRANSFORMED</a>;
<a name="l01464"></a>01464 }
<a name="l01465"></a>01465 
<a name="l01466"></a><a class="code" href="group__VisVideo.html#gaf31813f247c63b002b24255ce96cc398">01466</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gaf31813f247c63b002b24255ce96cc398" title="Non interpolating fast pixel doubler zoom.">visual_video_zoom_double</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src)
<a name="l01467"></a>01467 {
<a name="l01468"></a>01468     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01469"></a>01469     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01470"></a>01470     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>);
<a name="l01471"></a>01471 
<a name="l01472"></a>01472     <span class="keywordflow">switch</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>) {
<a name="l01473"></a>01473         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>:
<a name="l01474"></a>01474             <a class="code" href="lv__video__scale_8c.html#ad823b477981ff613fd5b5c649682a04a">visual_video_zoom_color8</a> (dest, src);
<a name="l01475"></a>01475             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01476"></a>01476 
<a name="l01477"></a>01477         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>:
<a name="l01478"></a>01478             <a class="code" href="lv__video__scale_8c.html#a4455cc6ac8168a69c3ffce85b41058f3">visual_video_zoom_color16</a> (dest, src);
<a name="l01479"></a>01479             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01480"></a>01480 
<a name="l01481"></a>01481         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>:
<a name="l01482"></a>01482             <a class="code" href="lv__video__scale_8c.html#a284026d133b71fcdf08c127ebf7a9823">visual_video_zoom_color24</a> (dest, src);
<a name="l01483"></a>01483             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01484"></a>01484 
<a name="l01485"></a>01485         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>:
<a name="l01486"></a>01486             <a class="code" href="lv__video__scale_8c.html#a3954457d8ca8c5707cbf042589ee4338">visual_video_zoom_color32</a> (dest, src);
<a name="l01487"></a>01487             <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01488"></a>01488 
<a name="l01489"></a>01489         <span class="keywordflow">default</span>:
<a name="l01490"></a>01490             <a class="code" href="group__VisLog.html#ga6cb2aa41edb99cc803a3893601f2362c" title="Used for log messages, this is brought under a define so that the __FILE__ and __LINE__ macros (and p...">visual_log</a> (<a class="code" href="group__VisLog.html#gga9fed3305ac1acb555bc97dc26f350e3ba8bf23a2943c56c20c179bb1d75d862c2" title="Error message, use to notify the user of fatals.">VISUAL_LOG_ERROR</a>, _(<span class="stringliteral">&quot;Invalid depth passed to the scaler&quot;</span>));
<a name="l01491"></a>01491             <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>;
<a name="l01492"></a>01492     }
<a name="l01493"></a>01493 }
<a name="l01494"></a>01494 
<a name="l01495"></a>01495 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> is_valid_scale_method (<a class="code" href="group__VisVideo.html#gac960c0b0e39022b51dd97d840e3c1173" title="Enumerate that defines the different methods of scaling within VisVideo.">VisVideoScaleMethod</a> scale_method)
<a name="l01496"></a>01496 {
<a name="l01497"></a>01497     <span class="keywordflow">return</span> scale_method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173a7c1c70d0f98cb6109f9a84543ce386aa" title="Nearest neighbour.">VISUAL_VIDEO_SCALE_NEAREST</a>
<a name="l01498"></a>01498         || scale_method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173ad0ee26921b0cc685d51ec99c8374cbf8" title="Bilinearly interpolated.">VISUAL_VIDEO_SCALE_BILINEAR</a>;
<a name="l01499"></a>01499 }
<a name="l01500"></a>01500 
<a name="l01501"></a><a class="code" href="group__VisVideo.html#gaa7c863749150de3723d9ea4f0fd05796">01501</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gaa7c863749150de3723d9ea4f0fd05796" title="Scale VisVideo.">visual_video_scale</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisVideo.html#gac960c0b0e39022b51dd97d840e3c1173" title="Enumerate that defines the different methods of scaling within VisVideo.">VisVideoScaleMethod</a> method)
<a name="l01502"></a>01502 {
<a name="l01503"></a>01503     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01504"></a>01504     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01505"></a>01505     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> == src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>);
<a name="l01506"></a>01506     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (is_valid_scale_method (method), -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55baea87222e59f399aa45f5b533e2cb2dd3" title="The VisVideoScaleMethod argument is not valid.">VISUAL_ERROR_VIDEO_INVALID_SCALE_METHOD</a>);
<a name="l01507"></a>01507 
<a name="l01508"></a>01508     <span class="comment">/* If the dest and source are equal in dimension and scale_method is nearest, do a</span>
<a name="l01509"></a>01509 <span class="comment">     * blit overlay */</span>
<a name="l01510"></a>01510     <span class="keywordflow">if</span> (<a class="code" href="group__VisVideo.html#gae2e338f2ca7198f6f2929c831c8fc72d" title="Checks if two VisVideo objects are the same depth and dimension wise.">visual_video_compare_ignore_pitch</a> (dest, src) &amp;&amp; method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173a7c1c70d0f98cb6109f9a84543ce386aa" title="Nearest neighbour.">VISUAL_VIDEO_SCALE_NEAREST</a>) {
<a name="l01511"></a>01511         <a class="code" href="group__VisVideo.html#ga97113f079df09d012be622b5fbe035a2" title="This function blits a VisVideo into another VisVideo.">visual_video_blit_overlay</a> (dest, src, 0, 0, <a class="code" href="lv__defines_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);
<a name="l01512"></a>01512 
<a name="l01513"></a>01513         <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01514"></a>01514     }
<a name="l01515"></a>01515 
<a name="l01516"></a>01516     <span class="keywordflow">switch</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>) {
<a name="l01517"></a>01517         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614ca8e0303737d37fd8a400837ea3db72089" title="8 bits indexed surface flag.">VISUAL_VIDEO_DEPTH_8BIT</a>:
<a name="l01518"></a>01518             <span class="keywordflow">if</span> (method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173a7c1c70d0f98cb6109f9a84543ce386aa" title="Nearest neighbour.">VISUAL_VIDEO_SCALE_NEAREST</a>)
<a name="l01519"></a>01519                 <a class="code" href="lv__video__scale_8c.html#a778876b5d7f901a73429cf51ec4e5c6f">visual_video_scale_nearest_color8</a> (dest, src);
<a name="l01520"></a>01520             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173ad0ee26921b0cc685d51ec99c8374cbf8" title="Bilinearly interpolated.">VISUAL_VIDEO_SCALE_BILINEAR</a>)
<a name="l01521"></a>01521                 <a class="code" href="lv__video__scale_8c.html#ad73d3ffd70337db8e23fa6135ca620fc">visual_video_scale_bilinear_color8</a> (dest, src);
<a name="l01522"></a>01522 
<a name="l01523"></a>01523             <span class="keywordflow">break</span>;
<a name="l01524"></a>01524 
<a name="l01525"></a>01525         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cab1f6f3c63b7edf005c8238012554ac75" title="16 bits 5-6-5 surface flag.">VISUAL_VIDEO_DEPTH_16BIT</a>:
<a name="l01526"></a>01526             <span class="keywordflow">if</span> (method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173a7c1c70d0f98cb6109f9a84543ce386aa" title="Nearest neighbour.">VISUAL_VIDEO_SCALE_NEAREST</a>)
<a name="l01527"></a>01527                 <a class="code" href="lv__video__scale_8c.html#a773c398c4154637d673481bbd2cd88f9">visual_video_scale_nearest_color16</a> (dest, src);
<a name="l01528"></a>01528             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173ad0ee26921b0cc685d51ec99c8374cbf8" title="Bilinearly interpolated.">VISUAL_VIDEO_SCALE_BILINEAR</a>)
<a name="l01529"></a>01529                 <a class="code" href="lv__video__scale_8c.html#a83e57794043ee34500e23625e51d0096">visual_video_scale_bilinear_color16</a> (dest, src);
<a name="l01530"></a>01530 
<a name="l01531"></a>01531             <span class="keywordflow">break</span>;
<a name="l01532"></a>01532 
<a name="l01533"></a>01533         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cad81e57ad49704a5cb7f7e0ad44181980" title="24 bits surface flag.">VISUAL_VIDEO_DEPTH_24BIT</a>:
<a name="l01534"></a>01534             <span class="keywordflow">if</span> (method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173a7c1c70d0f98cb6109f9a84543ce386aa" title="Nearest neighbour.">VISUAL_VIDEO_SCALE_NEAREST</a>)
<a name="l01535"></a>01535                 <a class="code" href="lv__video__scale_8c.html#a5d722e3a8d07eacd3726e57936f55a19">visual_video_scale_nearest_color24</a> (dest, src);
<a name="l01536"></a>01536             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173ad0ee26921b0cc685d51ec99c8374cbf8" title="Bilinearly interpolated.">VISUAL_VIDEO_SCALE_BILINEAR</a>)
<a name="l01537"></a>01537                 <a class="code" href="lv__video__scale_8c.html#aaf69b34e55f4a9ab07160ad780a7e579">visual_video_scale_bilinear_color24</a> (dest, src);
<a name="l01538"></a>01538 
<a name="l01539"></a>01539             <span class="keywordflow">break</span>;
<a name="l01540"></a>01540 
<a name="l01541"></a>01541         <span class="keywordflow">case</span> <a class="code" href="group__VisVideo.html#gga2832fcb27e3ba79fae7e8de0f408614cabd1c07454399795162bc62dada115edf" title="32 bits surface flag.">VISUAL_VIDEO_DEPTH_32BIT</a>:
<a name="l01542"></a>01542             <span class="keywordflow">if</span> (method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173a7c1c70d0f98cb6109f9a84543ce386aa" title="Nearest neighbour.">VISUAL_VIDEO_SCALE_NEAREST</a>)
<a name="l01543"></a>01543                 <a class="code" href="lv__video__scale_8c.html#a35e6cfc76868144f8456f1c79b468140">visual_video_scale_nearest_color32</a> (dest, src);
<a name="l01544"></a>01544             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (method == <a class="code" href="group__VisVideo.html#ggac960c0b0e39022b51dd97d840e3c1173ad0ee26921b0cc685d51ec99c8374cbf8" title="Bilinearly interpolated.">VISUAL_VIDEO_SCALE_BILINEAR</a>) {
<a name="l01545"></a>01545                 <span class="keywordflow">if</span> (<a class="code" href="group__VisCPU.html#ga3432e5831c8d15f8cfdd9c09a45ed1d6" title="Function to retrieve if the MMX CPU feature is enabled.">visual_cpu_has_mmx</a> ())
<a name="l01546"></a>01546                     <a class="code" href="group__VisVideo.html#gaafe932704b60b2e71827f3677aa02cd3">_lv_scale_bilinear_32_mmx</a> (dest, src);
<a name="l01547"></a>01547                 <span class="keywordflow">else</span>
<a name="l01548"></a>01548                     <a class="code" href="lv__video__scale_8c.html#a52b2a4949005bbd827d0399ec73deb4b">visual_video_scale_bilinear_color32</a> (dest, src);
<a name="l01549"></a>01549             }
<a name="l01550"></a>01550 
<a name="l01551"></a>01551             <span class="keywordflow">break</span>;
<a name="l01552"></a>01552 
<a name="l01553"></a>01553         <span class="keywordflow">default</span>:
<a name="l01554"></a>01554             <a class="code" href="group__VisLog.html#ga6cb2aa41edb99cc803a3893601f2362c" title="Used for log messages, this is brought under a define so that the __FILE__ and __LINE__ macros (and p...">visual_log</a> (<a class="code" href="group__VisLog.html#gga9fed3305ac1acb555bc97dc26f350e3ba8bf23a2943c56c20c179bb1d75d862c2" title="Error message, use to notify the user of fatals.">VISUAL_LOG_ERROR</a>, _(<span class="stringliteral">&quot;Invalid depth passed to the scaler&quot;</span>));
<a name="l01555"></a>01555 
<a name="l01556"></a>01556             <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55bae46a77283d2bb992e169e22f83af2437" title="The VisVideoDepth value is not valid.">VISUAL_ERROR_VIDEO_INVALID_DEPTH</a>;
<a name="l01557"></a>01557 
<a name="l01558"></a>01558             <span class="keywordflow">break</span>;
<a name="l01559"></a>01559     }
<a name="l01560"></a>01560 
<a name="l01561"></a>01561     <span class="keywordflow">return</span> <a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba73e463399cd84c08294d95cf0b4b7cf8" title="No error.">VISUAL_OK</a>;
<a name="l01562"></a>01562 }
<a name="l01563"></a>01563 
<a name="l01564"></a><a class="code" href="group__VisVideo.html#ga323e491222625b28b6416fa64072b5e3">01564</a> <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *<a class="code" href="group__VisVideo.html#ga323e491222625b28b6416fa64072b5e3" title="Scale VisVideo, and return a newly allocated scaled VisVideo.">visual_video_scale_new</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <a class="code" href="group__VisVideo.html#gac960c0b0e39022b51dd97d840e3c1173" title="Enumerate that defines the different methods of scaling within VisVideo.">VisVideoScaleMethod</a> scale_method)
<a name="l01565"></a>01565 {
<a name="l01566"></a>01566     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video;
<a name="l01567"></a>01567 
<a name="l01568"></a>01568     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01569"></a>01569 
<a name="l01570"></a>01570     video = <a class="code" href="group__VisVideo.html#ga334b47917488c4d5bf50c01f7ec0078a" title="Creates a new VisVideo and also allocates a buffer.">visual_video_new_with_buffer</a> (width, height, src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>);
<a name="l01571"></a>01571 
<a name="l01572"></a>01572     <a class="code" href="group__VisVideo.html#gaa7c863749150de3723d9ea4f0fd05796" title="Scale VisVideo.">visual_video_scale</a> (video, src, scale_method);
<a name="l01573"></a>01573 
<a name="l01574"></a>01574     <span class="keywordflow">return</span> video;
<a name="l01575"></a>01575 }
<a name="l01576"></a>01576 
<a name="l01577"></a><a class="code" href="group__VisVideo.html#gaa7fe81a3946a3c8068dcc4262e2f9ebd">01577</a> <span class="keywordtype">int</span> <a class="code" href="group__VisVideo.html#gaa7fe81a3946a3c8068dcc4262e2f9ebd" title="Scale VisVideo, but does an internal depth transformation when the source VisVideo is not of the same...">visual_video_scale_depth</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dest, <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <a class="code" href="group__VisVideo.html#gac960c0b0e39022b51dd97d840e3c1173" title="Enumerate that defines the different methods of scaling within VisVideo.">VisVideoScaleMethod</a> scale_method)
<a name="l01578"></a>01578 {
<a name="l01579"></a>01579     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (dest != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01580"></a>01580     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8e75253b6c1b9338661bf828697a6cbd" title="The VisVideo is NULL.">VISUAL_ERROR_VIDEO_NULL</a>);
<a name="l01581"></a>01581 
<a name="l01582"></a>01582     <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a> != src-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>) {
<a name="l01583"></a>01583         <span class="keywordtype">int</span> error;
<a name="l01584"></a>01584         <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *dtransform = <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01585"></a>01585 
<a name="l01586"></a>01586         dtransform = <a class="code" href="group__VisVideo.html#gaff20b9be5b08834831fbaf8e64e4d74a" title="Creates a new VisVideo structure, without an associated screen buffer.">visual_video_new</a> ();
<a name="l01587"></a>01587 
<a name="l01588"></a>01588         <a class="code" href="group__VisVideo.html#ga7bd71a3e78d54fd17c8e9d77c4ab3c19" title="Sets all attributes for a VisVideo.">visual_video_set_attributes</a> (dtransform, dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a>, dest-&gt;<a class="code" href="struct__VisVideo.html#a8ada881d41dc65ead702708d5a3bd137" title="Surface it&#39;s height.">height</a>, dest-&gt;<a class="code" href="struct__VisVideo.html#abdc261c2614f2e5bb7417dd38710c25e" title="Surface it&#39;s width.">width</a> * dest-&gt;<a class="code" href="struct__VisVideo.html#a0ed6e55ab48e33c65987ecff0d7db5ba" title="Surface it&#39;s bytes per pixel.">bpp</a>, dest-&gt;<a class="code" href="struct__VisVideo.html#aec4117510d36427bd2ccc6e024941201" title="Surface it&#39;s depth.">depth</a>);
<a name="l01589"></a>01589         <a class="code" href="group__VisVideo.html#gaefb8348e556887774f1119473379954b" title="Allocates a buffer for the VisVideo.">visual_video_allocate_buffer</a> (dtransform);
<a name="l01590"></a>01590 
<a name="l01591"></a>01591         <a class="code" href="group__VisVideo.html#ga9580addd8cd5a8abddec4842b953d719" title="Video depth transforms one VisVideo into another using the depth information stored within the VisVid...">visual_video_depth_transform</a> (dtransform, src);
<a name="l01592"></a>01592 
<a name="l01593"></a>01593         error = <a class="code" href="group__VisVideo.html#gaa7c863749150de3723d9ea4f0fd05796" title="Scale VisVideo.">visual_video_scale</a> (dest, dtransform, scale_method);
<a name="l01594"></a>01594 
<a name="l01595"></a>01595         <a class="code" href="group__VisObject.html#gafd90dd70679ecae99a4a55cd605556b6" title="Decreases the reference counter for a VisObject.">visual_object_unref</a> (<a class="code" href="group__VisObject.html#gaf188438cc2a544151f50b4fb4db53e86">VISUAL_OBJECT</a> (dtransform));
<a name="l01596"></a>01596 
<a name="l01597"></a>01597         <span class="keywordflow">return</span> error;
<a name="l01598"></a>01598     } <span class="keywordflow">else</span> {
<a name="l01599"></a>01599         <span class="keywordflow">return</span> <a class="code" href="group__VisVideo.html#gaa7c863749150de3723d9ea4f0fd05796" title="Scale VisVideo.">visual_video_scale</a> (dest, src, scale_method);
<a name="l01600"></a>01600     }
<a name="l01601"></a>01601 
<a name="l01602"></a>01602     <span class="keywordflow">return</span> -<a class="code" href="group__VisError.html#gga06fc87d81c62e9abb8790b6e5713c55ba8f4228439a6155fecc257ce44504a5e3" title="The impossible happened, this should never happen.">VISUAL_ERROR_IMPOSSIBLE</a>;
<a name="l01603"></a>01603 }
<a name="l01604"></a>01604 
<a name="l01605"></a><a class="code" href="group__VisVideo.html#ga5874ebc50b1dac0b5cd1b14272742339">01605</a> <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *<a class="code" href="group__VisVideo.html#ga5874ebc50b1dac0b5cd1b14272742339" title="Creates a new scaled VisVideo, but does an internal depth transformation when the source VisVideo is ...">visual_video_scale_depth_new</a> (<a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *src, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <a class="code" href="group__VisVideo.html#ga2832fcb27e3ba79fae7e8de0f408614c" title="Enumerate that defines video depths for use within plugins, libvisual functions, etc.">VisVideoDepth</a> depth,
<a name="l01606"></a>01606         <a class="code" href="group__VisVideo.html#gac960c0b0e39022b51dd97d840e3c1173" title="Enumerate that defines the different methods of scaling within VisVideo.">VisVideoScaleMethod</a> scale_method)
<a name="l01607"></a>01607 {
<a name="l01608"></a>01608     <a class="code" href="struct__VisVideo.html" title="Data structure that contains all the information about a screen surface.">VisVideo</a> *video;
<a name="l01609"></a>01609 
<a name="l01610"></a>01610     <a class="code" href="lv__checks_8h.html#a34012d2243c29a51364c5c335781d572" title="Return if val if expr is FALSE, showing a critical message with useful information.">visual_return_val_if_fail</a> (src != <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="lv__defines_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01611"></a>01611 
<a name="l01612"></a>01612     video = <a class="code" href="group__VisVideo.html#ga334b47917488c4d5bf50c01f7ec0078a" title="Creates a new VisVideo and also allocates a buffer.">visual_video_new_with_buffer</a> (width, height, depth);
<a name="l01613"></a>01613 
<a name="l01614"></a>01614     <a class="code" href="group__VisVideo.html#gaa7fe81a3946a3c8068dcc4262e2f9ebd" title="Scale VisVideo, but does an internal depth transformation when the source VisVideo is not of the same...">visual_video_scale_depth</a> (video, src, scale_method);
<a name="l01615"></a>01615 
<a name="l01616"></a>01616     <span class="keywordflow">return</span> video;
<a name="l01617"></a>01617 }
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 9 2012 22:25:09 for libvisual by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
